import{R as _e,S as ce,Y as de,Z as Ee,a as oe,c as T,d as I,fa as le,k as ne,la as Se,n as se,oa as Ce,q as ae,qa as me,ra as pe}from"./chunk-2HC3UJHZ.js";import"./chunk-2KRI6ZBU.js";import{A as h,i as Z}from"./chunk-EZNRQUAM.js";import"./chunk-IQUW5QUP.js";import"./chunk-FYGCA5T3.js";import{f as ee,j as ie}from"./chunk-QABDRPPI.js";import{a as te,c as re}from"./chunk-CSA5XVMK.js";import{$ as y,$b as B,Ab as o,B as L,Bb as a,Cb as P,Cc as J,Da as f,Ec as K,Gb as A,Gc as Q,Ic as Y,Kb as W,L as O,Ob as p,Pb as n,Ta as E,_b as x,a as X,ac as U,b as F,bb as R,e as g,gb as C,kc as j,la as l,lc as q,nb as k,pb as V,rb as m,ta as c,u as $,ua as d,wb as u,yb as z,zb as H}from"./chunk-MOGN5K2H.js";function ue(r,_){if(r&1){let e=A();o(0,"button",13),p("click",function(){c(e);let i=n(2);return d(i.removeFromFavorites(i.exercise));}),o(1,"mat-icon"),x(2,"star"),a()();}}function Ae(r,_){if(r&1){let e=A();o(0,"button",14),p("click",function(){c(e);let i=n(2);return d(i.addToFavorites(i.exercise));}),o(1,"mat-icon"),x(2,"star_border"),a()();}}function ve(r,_){if(r&1){let e=A();o(0,"button",15),p("click",function(){c(e);let i=n(2);return d(i.removeFromSelected(i.exercise));})("mouseenter",function(){c(e);let i=n(2);return d(i.showHoverIcon(!0));})("mouseleave",function(){c(e);let i=n(2);return d(i.showHoverIcon(!1));}),o(1,"mat-icon"),x(2),a()();}if(r&2){let e=n(2);m("color",e.isHovered?"accent":"primary"),E(2),B(e.isHovered?"close":"done");}}function Pe(r,_){if(r&1){let e=A();o(0,"button",16),p("click",function(){c(e);let i=n(2);return d(i.addToSelected(i.exercise));}),o(1,"mat-icon"),x(2,"add"),a()();}}function fe(r,_){if(r&1){let e=A();o(0,"div",1)(1,"div",2),P(2,"ui-video-player",3),a(),o(3,"div",4)(4,"div",5)(5,"span",6),x(6),a()(),o(7,"div",7),C(8,ue,3,0,"button",8)(9,Ae,3,0,"button",9),o(10,"button",10),p("click",function(){c(e);let i=n();return d(i.showExerciseModal(i.exercise.id,i.exercise,!1));}),o(11,"mat-icon"),x(12,"info_outline"),a()(),C(13,ve,3,2,"button",11)(14,Pe,3,0,"button",12),a()()();}if(r&2){let e=n();E(2),m("videoSrc",e.exercise.video)("thumbnail",e.exercise.images==null?null:e.exercise.images.mainImg)("isModal",!1),E(4),U(" ",e.exercise.name[e.selectedLanguage]," "),E(2),u(e.exercise.isFavorite?8:9),E(5),u(e.exercise.isSelected?13:14);}}var w=(()=>{class r{constructor(){this.dialog=l(se),this.exercisesService=l(oe),this.shareStateService=l(T),this.selectedExercisesService=l(I),this.usersService=l(h),this.localstorageService=l(Z),this.subscriptions=new g(),this.isEmptyPlaceholder=!1,this.selectedExercise=new f(),this.removeExercise=new f(),this.favoriteExercise=new f(),this.removeFavoriteExercise=new f(),this.isHovered=!1,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId;}ngOnInit(){this.selectedLanguage=this._getUserLanguageToken();}addToSelected(e){this.selectedExercisesService.addToSelected(e);}removeFromSelected(e){this.selectedExercisesService.removeFromSelected(e);}selectExercise(e){e.isSelected=!0,this.selectedExercise.emit(e);}removeCard(e){this.removeExercise.emit(e);}showHoverIcon(e){this.isHovered=e;}_getExercise(e){return this.exercisesService.getExercise(e);}showExerciseModal(e,t,i){let s=this._getExercise(e).subscribe(v=>{this.dialog.open(Se,{data:{fullExercise:v,exerciseCard:t,isProgramExercise:i,selectedLang:this.selectedLanguage},width:"500px",panelClass:["custom-dialog",i?"custom-shadow":""],backdropClass:i?"custom-backdrop":""});});this.subscriptions.add(s);}addToFavorites(e){e.isFavorite=!0,this.favoriteExercise.emit(e);}removeFromFavorites(e){e.isFavorite=!1,this.removeFavoriteExercise.emit(e);}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")?.split("-")[0];}ngOnDestroy(){this.subscriptions.unsubscribe();}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=R({type:r,selectors:[["sanareapp-exercise-card"]],inputs:{exercise:"exercise",cardWrapper:"cardWrapper",isEmptyPlaceholder:"isEmptyPlaceholder"},outputs:{selectedExercise:"selectedExercise",removeExercise:"removeExercise",favoriteExercise:"favoriteExercise",removeFavoriteExercise:"removeFavoriteExercise"},decls:2,vars:2,consts:()=>{let e;e="Aus Favoriten entfernen";let t;t="Favoriten-Symbol-Schaltfl\xE4che mit einem Sternsymbol";let i;i="Zu meinen Favoriten hinzuf\xFCgen";let s;s="Favoriten-Symbol-Schaltfl\xE4che mit einem Sternsymbol";let v;v="Einzelheiten";let G;G="Infosymbol-Schaltfl\xE4che mit einem Infosymbol";let D;D="\xDCbung entfernen";let M;M="Symbolschaltfl\xE4che \u201EEntfernen\u201C mit einem Schlie\xDFen-Symbol";let N;N="\xDCbung hinzuf\xFCgen";let b;return b="Schaltfl\xE4che \u201ESymbol hinzuf\xFCgen\u201C mit einem Symbol zum Hinzuf\xFCgen",[[3,"ngClass"],[1,"card"],[1,"card-head"],[3,"videoSrc","thumbnail","isModal"],[1,"card-body"],[1,"exercise-name"],[1,"multi-line-text"],[1,"card-icons"],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star"],["mat-icon-button","","matTooltip",i,"aria-label",s],["mat-icon-button","","matTooltip",v,"aria-label",G,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",M,1,"toggleDoneRemoveBtn",3,"color"],["mat-icon-button","","matTooltip",N,"color","primary","aria-label",b],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star",3,"click"],["mat-icon-button","","matTooltip",i,"aria-label",s,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",M,1,"toggleDoneRemoveBtn",3,"click","mouseenter","mouseleave","color"],["mat-icon-button","","matTooltip",N,"color","primary","aria-label",b,3,"click"]];},template:function(t,i){t&1&&(o(0,"div",0),C(1,fe,15,6,"div",1),a()),t&2&&(m("ngClass",i.cardWrapper),E(),u(i.isEmptyPlaceholder?-1:1));},dependencies:[J,ee,re,te,ie,le],styles:["[_nghost-%COMP%]{border-radius:16px}"]});}}return r;})();var ge=()=>[Ce,pe,w],Re=(r,_)=>_.id;function he(r,_){r&1&&(o(0,"div",2)(1,"span"),W(2,0),a()());}function Te(r,_){r&1&&(o(0,"div",3),P(1,"mat-spinner",5),a());}function Ie(r,_){r&1&&P(0,"div",9);}function De(r,_){if(r&1){let e=A();o(0,"sanareapp-exercise-card",7),p("removeExercise",function(i){c(e);let s=n(2);return d(s.removeCard(i));})("favoriteExercise",function(i){c(e);let s=n(2);return d(s.addToFavorites(i));})("removeFavoriteExercise",function(i){c(e);let s=n(2);return d(s.removeFromFavorites(i));})("cdkDragStarted",function(){c(e);let i=n(2);return d(i.onDragStarted());})("cdkDragEnded",function(){c(e);let i=n(2);return d(i.onDragEnded());}),C(1,Ie,1,0,"div",8),a();}if(r&2){let e=n().$implicit;m("isEmptyPlaceholder",!1)("exercise",e)("cdkDragData",e);}}function Me(r,_){r&1&&P(0,"div",10);}function Ne(r,_){if(r&1&&(o(0,"div",6)(1,"sanareapp-exercise-card",11),x(2," >"),a()()),r&2){let e=n().$implicit;E(),m("exercise",e);}}function be(r,_){if(r&1&&(C(0,De,2,3)(1,Me,1,0),k(2,0,ge,null,1),V(),C(4,Ne,3,1,"div",6)),r&2){let e=_.$implicit,t=n();E(4),u(t.transferringItem()===e?4:-1);}}var di=(()=>{class r{constructor(){this.themeManager=l(ae),this.shareStateService=l(T),this.selectedExercisesService=l(I),this.usersService=l(h),this.transferringItemService=l(ne),this.isFetchingData=this.shareStateService.isFetchingData,this.transferringItem=this.transferringItemService.transferringItem,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId,this.selectedExercises=this.selectedExercisesService.selectedExercises,this.themeSignal=this.themeManager.themeSignal,this.subscriptions=new g(),this.isDragging=!1;}ngOnInit(){this.windowSize$=L(window,"resize").pipe(y(null),O(200),$(()=>window.innerWidth));}getGridStyle(e){let t=e??0;return this.drawerOpen=this.shareStateService.drawerSignal(),t<1510&&t>1338&&this.drawerOpen?{"grid-template-columns":"repeat(3, 1fr)"}:t<1338&&t>1168&&this.drawerOpen?{"grid-template-columns":"repeat(2, 1fr)"}:{};}entered(){this.transferringItem.set(void 0);}exited(e){this.transferringItem.set(e.item.data),console.log(this.transferringItem());}noReturnPredicate(){return!1;}removeCard(e){let t;this.selectedExercises().some((i,s)=>{i.id===e.id&&(t=s);}),this._resetCardState(e,t);}addToFavorites(e){this.userFavorites.update(t=>{let i=F(X({},t),{favExercises:[...t.favExercises,e.id]});return this._updateFavorites(this.userId(),i),i;});}removeFromFavorites(e){let t=this.userFavorites().favExercises.filter(i=>i!==e.id);this.userFavorites.update(i=>F(X({},i),{favExercises:[...t]})),this._updateFavorites(this.userId(),this.userFavorites());}_updateFavorites(e,t){let i=this.usersService.updateFavorites(e,t).subscribe(s=>console.log(s));this.subscriptions.add(i);}_resetCardState(e,t){this.exercises.length!==0&&this.exercises.find(i=>{i.id===e.id&&(i.isSelected=!1);});}onDragStarted(){this.isDragging=!0;}onDragEnded(){this.isDragging=!1;}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=R({type:r,selectors:[["sanareapp-exercises-grid"]],inputs:{exercises:"exercises"},decls:7,vars:8,consts:()=>{let e;return e="Zu deiner Suche wurden keine \xDCbungen gefunden",[e,["overlay-scrollbars","",1,"grid-container",3,"options","defer"],[1,"noExercisesFound"],[1,"fetchingDataSpinner"],["cdkDropList","","cdkDropListSortingDisabled","",1,"exercise-cards",3,"cdkDropListEntered","cdkDropListExited","cdkDropListData","ngStyle","cdkDropListEnterPredicate"],["diameter","50"],[1,"static-placeholder"],["cardWrapper","wrap-default","cdkDrag","",3,"removeExercise","favoriteExercise","removeFavoriteExercise","cdkDragStarted","cdkDragEnded","isEmptyPlaceholder","exercise","cdkDragData"],["class","exercise-card-placeholder",4,"cdkDragPlaceholder"],[1,"exercise-card-placeholder"],[1,"exercise-card-skeleton"],["cardWrapper","wrap-default",3,"exercise"]];},template:function(t,i){t&1&&(o(0,"div",1),C(1,he,3,0,"div",2)(2,Te,2,0,"div",3),o(3,"div",4),j(4,"async"),p("cdkDropListEntered",function(){return i.entered();})("cdkDropListExited",function(v){return i.exited(v);}),z(5,be,5,1,null,null,Re),a()()),t&2&&(m("options",i.themeSignal()),E(),u((i.exercises==null?null:i.exercises.length)===0&&!i.isFetchingData()?1:-1),E(),u(i.isFetchingData()?2:-1),E(),m("cdkDropListData",i.exercises)("ngStyle",i.getGridStyle(q(4,6,i.windowSize$)))("cdkDropListEnterPredicate",i.noReturnPredicate),E(2),H(i.exercises));},dependencies:[Y,K,Q,me,ce,_e,w,Ee,de],styles:[".noExercisesFound[_ngcontent-%COMP%]{text-align:center;margin:32px 0}.fetchingDataSpinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;left:4px;right:4px;top:4px;width:calc(100% - 20px);height:100%;border-top-left-radius:16px;border-top-right-radius:16px}"]});}}return r;})();export{di as ExercisesGridComponent};/**i18n:e9421f27e91e2550a5a0bd03ad694673877e5a8020798e378092da15c61db7f3*/