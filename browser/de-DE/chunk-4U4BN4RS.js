import{a as E,b as k}from"./chunk-L5RXOLJO.js";import{$b as C,Bb as g,Ec as x,Ja as _,Ma as d,Mb as a,Ob as n,Rb as m,Ud as I,Vb as l,Wb as u,Xb as h,d as f,hc as w,ib as c,ic as v,kb as r,nc as b,oc as V,pc as O,tc as T,ue as S,va as y,wa as P,wb as M}from"./chunk-BLHYBFZJ.js";var z=["videoPlayer"],Q=(t,p,e)=>({"remove-width":t,"exercise-img-player":p,"modal-img":e});function F(t,p){if(t&1&&h(0,"img",5),t&2){let e=v();n("remove-width",e.isDash()),a("src",e.thumbnail,c)}}function U(t,p){if(t&1&&h(0,"source",3),t&2){let e=v();a("src",e.videoSrc,c)}}function B(t,p){if(t&1&&(l(0,"div",6),h(1,"mat-progress-bar",7),u()),t&2){let e=v();n("progress-dash",e.isDash()),r(),n("play-progress",e.isPlaying()),a("value",e.progressValue())}}var K=(()=>{class t{constructor(){this.isModal=_(!0),this.isDash=_(!1),this.isPlaying=d(!1),this.progressValue=d(0),this.mouseOver=d(!1)}ngAfterViewInit(){this.video=this.videoPlayer.nativeElement}logVideoTime(){if(!this.isPlaying())return;let e=this.videoPlayer.nativeElement.currentTime,o=this.videoPlayer.nativeElement.duration,i=e/o*100;this.progressValue.update(()=>+i.toFixed(1))}getIsModalIsPlayingStatus(){return!this.isModal()&&!this.isPlaying()}onMouseEnter(){if(this.isModal())return;this.mouseOver.set(!0);let e=setInterval(()=>{this.progressValue.update(o=>o+50),this.progressValue()>=100&&(this.progressValue.set(100),clearInterval(e))},100);this.progressInterval=e,this.hoverTimeout=setTimeout(()=>{this.playVideo()},500)}onMouseLeave(){this.isModal()||(this.progressValue.set(0),this.pauseVideo(),clearTimeout(this.hoverTimeout),clearInterval(this.progressInterval))}playVideo(){return f(this,null,function*(){if(!this.isModal()&&!this.isPlaying())try{this.video.load(),yield new Promise(e=>{this.video.addEventListener("canplay",()=>e(),{once:!0})}),this.isPlaying.set(!0),yield this.video.play(),this.video.loop=!0}catch(e){console.error("Video playback failed:",e)}})}pauseVideo(){this.isPlaying.set(!1),this.video.loop=!1,this.video.pause()}togglePlay(){let e=this.videoPlayer.nativeElement;e.paused?e.play():e.pause()}static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=M({type:t,selectors:[["ui-video-player"]],viewQuery:function(o,i){if(o&1&&b(z,5),o&2){let s;V(s=O())&&(i.videoPlayer=s.first)}},inputs:{videoSrc:"videoSrc",thumbnail:"thumbnail",isModal:[1,"isModal"],isDash:[1,"isDash"]},decls:8,vars:17,consts:[["videoPlayer",""],["alt","Video Thumbnail",1,"exercise-img-player",3,"src","remove-width"],["muted","","disablepictureinpicture","","controlslist","nodownload nofullscreen noplaybackrate","playsinline","",3,"timeupdate","click","controls","preload","poster","ngClass"],["type","video/mp4",3,"src"],[1,"progress-bar-wrapper",3,"progress-dash"],["alt","Video Thumbnail",1,"exercise-img-player",3,"src"],[1,"progress-bar-wrapper"],["mode","determinate",1,"progress-bar",3,"value"]],template:function(o,i){if(o&1){let s=C();l(0,"div"),g(1,F,1,3,"img",1),l(2,"video",2,0),w("timeupdate",function(){return y(s),P(i.logVideoTime())})("click",function(){return y(s),P(i.isModal()?i.togglePlay():"")}),g(4,U,1,1,"source",3),l(5,"p"),T(6,"Your browser does not support the video tag."),u()(),g(7,B,2,5,"div",4),u()}o&2&&(n("img-wrapper-player",!i.isModal())("reset-width-padding",i.isDash()),r(),m(i.getIsModalIsPlayingStatus()?1:-1),r(),n("video-hidden",i.getIsModalIsPlayingStatus()),a("controls",i.isModal())("preload",i.isModal()?"auto":"none")("poster",i.isModal()?"":i.thumbnail,c)("ngClass",x(13,Q,i.isDash(),!i.isModal(),i.isModal())),r(2),m(i.videoSrc?4:-1),r(3),m(i.mouseOver()?7:-1))},dependencies:[S,I,k,E],styles:[".img-wrapper-player[_ngcontent-%COMP%]{height:100%;width:100%;padding:8px}.exercise-img-player[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;z-index:1111}.reset-width-padding[_ngcontent-%COMP%]{width:100%;border-radius:8px;background:#fff;padding:4px;overflow:hidden}.remove-width[_ngcontent-%COMP%]{width:auto}.video-hidden[_ngcontent-%COMP%]{display:none}.progress-bar-wrapper[_ngcontent-%COMP%]{margin-right:-8px;margin-left:-8px}.progress-bar-wrapper.progress-dash[_ngcontent-%COMP%]{margin-right:-4px;margin-left:-4px;margin-top:-4px}.progress-bar-wrapper[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-track-color: rgba(255, 0, 0, 0)}.progress-bar-wrapper[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #ba1a1a}.progress-bar-wrapper[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-height: 2px}.progress-bar-wrapper[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{--mdc-linear-progress-track-height: 2px}.progress-bar-wrapper[_ngcontent-%COMP%]   .play-progress[_ngcontent-%COMP%]{--mdc-linear-progress-active-indicator-color: #415f91}video[_ngcontent-%COMP%]{--controls-opacity: 0}video[_ngcontent-%COMP%]:hover{--controls-opacity: 1}video[_ngcontent-%COMP%]::-moz-media-controls-panel{opacity:var(--controls-opacity);transition:opacity .3s ease}video[_ngcontent-%COMP%]::-webkit-media-controls-panel{opacity:var(--controls-opacity);transition:opacity .3s ease}video[_ngcontent-%COMP%]::-ms-controls{opacity:var(--controls-opacity);transition:opacity .3s ease}"]})}}return t})();export{K as a};
/**i18n:e33dda9241aa0d3f81605574177eca303a560132442e585b3107f4f1b4a47a86*/
