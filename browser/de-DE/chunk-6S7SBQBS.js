import{Ba as Se,Ea as me,Ga as pe,Ha as ue,U as ce,V as de,b as ne,ca as Ee,d as T,da as le,e as I,l as se,o as ae,r as _e,ta as Ce}from"./chunk-GJ7YPKQY.js";import{B as h,j as ee}from"./chunk-LWSDBKQH.js";import"./chunk-MM5BXHTK.js";import"./chunk-AGLUW5KV.js";import{f as ie,j as te}from"./chunk-DLSMW3HH.js";import{a as re,c as oe}from"./chunk-JJKWM2VU.js";import"./chunk-QERZJV4N.js";import{$ as k,$b as A,B as y,Bb as m,Ia as f,Ib as V,Ic as q,Jc as J,Kb as z,L as O,Mb as p,Rb as x,Tb as H,Ub as W,Vb as o,Wb as c,Xb as P,Xd as K,a as b,b as F,dc as B,e as R,ge as Q,hc as C,ic as n,ie as Y,kb as E,ma as l,sc as G,tc as u,u as L,uc as U,va as a,vc as j,wa as _,wb as g,xe as Z}from"./chunk-ULCUQGV7.js";function Ae(r,d){if(r&1){let e=A();o(0,"button",14),C("click",function(){a(e);let i=n(2);return _(i.removeFromFavorites(i.exercise));}),o(1,"mat-icon"),u(2,"star"),c()();}}function ve(r,d){if(r&1){let e=A();o(0,"button",15),C("click",function(){a(e);let i=n(2);return _(i.addToFavorites(i.exercise));}),o(1,"mat-icon"),u(2,"star_border"),c()();}}function Pe(r,d){if(r&1){let e=A();o(0,"button",16),C("click",function(){a(e);let i=n(2);return _(i.removeFromSelected(i.exercise));})("mouseenter",function(){a(e);let i=n(2);return _(i.showHoverIcon(!0));})("mouseleave",function(){a(e);let i=n(2);return _(i.showHoverIcon(!1));}),o(1,"mat-icon"),u(2),c()();}if(r&2){let e=n(2);p("color",e.isHovered?"accent":"primary"),E(2),U(e.isHovered?"close":"done");}}function fe(r,d){if(r&1){let e=A();o(0,"button",17),C("click",function(){a(e);let i=n(2);return _(i.addToSelected(i.exercise));}),o(1,"mat-icon"),u(2,"add"),c()();}}function Re(r,d){if(r&1){let e=A();o(0,"div",2)(1,"div",3),C("mouseenter",function(){a(e);let i=G(3);return _(i.onMouseEnter());})("mouseleave",function(){a(e);let i=G(3);return _(i.onMouseLeave());}),P(2,"ui-video-player",4,0),c(),o(4,"div",5)(5,"div",6)(6,"span",7),u(7),c()(),o(8,"div",8),m(9,Ae,3,0,"button",9)(10,ve,3,0,"button",10),o(11,"button",11),C("click",function(){a(e);let i=n();return _(i.showExerciseModal(i.exercise.id,i.exercise,!1));}),o(12,"mat-icon"),u(13,"info_outline"),c()(),m(14,Pe,3,2,"button",12)(15,fe,3,0,"button",13),c()()();}if(r&2){let e=n();E(2),p("videoSrc",e.exercise.video)("thumbnail",e.exercise.images==null?null:e.exercise.images.mainImg)("isModal",!1),E(5),j(" ",e.exercise.name[e.selectedLanguage]," "),E(2),x(e.exercise.isFavorite?9:10),E(5),x(e.exercise.isSelected?14:15);}}var w=(()=>{class r{constructor(){this.dialog=l(ae),this.exercisesService=l(ne),this.shareStateService=l(T),this.selectedExercisesService=l(I),this.usersService=l(h),this.localstorageService=l(ee),this.subscriptions=new R(),this.isEmptyPlaceholder=!1,this.selectedExercise=f(),this.removeExercise=f(),this.favoriteExercise=f(),this.removeFavoriteExercise=f(),this.isHovered=!1,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId;}ngOnInit(){this.selectedLanguage=this._getUserLanguageToken();}addToSelected(e){this.selectedExercisesService.addToSelected(e);}removeFromSelected(e){this.selectedExercisesService.removeFromSelected(e);}selectExercise(e){e.isSelected=!0,this.selectedExercise.emit(e);}removeCard(e){this.removeExercise.emit(e);}showHoverIcon(e){this.isHovered=e;}_getExercise(e){return this.exercisesService.getExercise(e);}showExerciseModal(e,t,i){let s=this._getExercise(e).subscribe(v=>{this.dialog.open(Se,{data:{fullExercise:v,exerciseCard:t,isProgramExercise:i,selectedLang:this.selectedLanguage},width:"500px",panelClass:["custom-dialog",i?"custom-shadow":""],backdropClass:i?"custom-backdrop":""});});this.subscriptions.add(s);}addToFavorites(e){e.isFavorite=!0,this.favoriteExercise.emit(e);}removeFromFavorites(e){e.isFavorite=!1,this.removeFavoriteExercise.emit(e);}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")?.split("-")[0];}ngOnDestroy(){this.subscriptions.unsubscribe();}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=g({type:r,selectors:[["sanareapp-exercise-card"]],inputs:{exercise:"exercise",cardWrapper:"cardWrapper",isEmptyPlaceholder:"isEmptyPlaceholder"},outputs:{selectedExercise:"selectedExercise",removeExercise:"removeExercise",favoriteExercise:"favoriteExercise",removeFavoriteExercise:"removeFavoriteExercise"},decls:2,vars:2,consts:()=>{let e;e="Aus Favoriten entfernen";let t;t="Favoriten-Symbol-Schaltfl\xE4che mit einem Sternsymbol";let i;i="Zu meinen Favoriten hinzuf\xFCgen";let s;s="Favoriten-Symbol-Schaltfl\xE4che mit einem Sternsymbol";let v;v="Einzelheiten";let $;$="Infosymbol-Schaltfl\xE4che mit einem Infosymbol";let D;D="\xDCbung entfernen";let M;M="Symbolschaltfl\xE4che \u201EEntfernen\u201C mit einem Schlie\xDFen-Symbol";let N;N="\xDCbung hinzuf\xFCgen";let X;return X="Schaltfl\xE4che \u201ESymbol hinzuf\xFCgen\u201C mit einem Symbol zum Hinzuf\xFCgen",[["videoPlayer",""],[3,"ngClass"],[1,"card"],[1,"card-head",3,"mouseenter","mouseleave"],[3,"videoSrc","thumbnail","isModal"],[1,"card-body"],[1,"exercise-name"],[1,"multi-line-text"],[1,"card-icons"],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star"],["mat-icon-button","","matTooltip",i,"aria-label",s],["mat-icon-button","","matTooltip",v,"aria-label",$,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",M,1,"toggleDoneRemoveBtn",3,"color"],["mat-icon-button","","matTooltip",N,"color","primary","aria-label",X],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star",3,"click"],["mat-icon-button","","matTooltip",i,"aria-label",s,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",M,1,"toggleDoneRemoveBtn",3,"click","mouseenter","mouseleave","color"],["mat-icon-button","","matTooltip",N,"color","primary","aria-label",X,3,"click"]];},template:function(t,i){t&1&&(o(0,"div",1),m(1,Re,16,6,"div",2),c()),t&2&&(p("ngClass",i.cardWrapper),E(),x(i.isEmptyPlaceholder?-1:1));},dependencies:[K,ie,oe,re,te,Ce],styles:["[_nghost-%COMP%]{border-radius:16px}"]});}}return r;})();var ge=()=>[me,ue,w],he=(r,d)=>d.id;function Te(r,d){r&1&&(o(0,"div",2)(1,"span"),B(2,0),c()());}function Ie(r,d){r&1&&(o(0,"div",3),P(1,"mat-spinner",5),c());}function De(r,d){r&1&&P(0,"div",9);}function Me(r,d){if(r&1){let e=A();o(0,"sanareapp-exercise-card",7),C("removeExercise",function(i){a(e);let s=n(2);return _(s.removeCard(i));})("favoriteExercise",function(i){a(e);let s=n(2);return _(s.addToFavorites(i));})("removeFavoriteExercise",function(i){a(e);let s=n(2);return _(s.removeFromFavorites(i));})("cdkDragStarted",function(){a(e);let i=n(2);return _(i.onDragStarted());})("cdkDragEnded",function(){a(e);let i=n(2);return _(i.onDragEnded());}),m(1,De,1,0,"div",8),c();}if(r&2){let e=n().$implicit;p("isEmptyPlaceholder",!1)("exercise",e)("cdkDragData",e);}}function Ne(r,d){r&1&&P(0,"div",10);}function Xe(r,d){if(r&1&&(o(0,"div",6)(1,"sanareapp-exercise-card",11),u(2," >"),c()()),r&2){let e=n().$implicit;E(),p("exercise",e);}}function be(r,d){if(r&1&&(m(0,Me,2,3)(1,Ne,1,0),V(2,0,ge,null,1),z(),m(4,Xe,3,1,"div",6)),r&2){let e=d.$implicit,t=n();E(4),x(t.transferringItem()===e?4:-1);}}var di=(()=>{class r{constructor(){this.themeManager=l(_e),this.shareStateService=l(T),this.selectedExercisesService=l(I),this.usersService=l(h),this.transferringItemService=l(se),this.isFetchingData=this.shareStateService.isFetchingData,this.transferringItem=this.transferringItemService.transferringItem,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId,this.selectedExercises=this.selectedExercisesService.selectedExercises,this.themeSignal=this.themeManager.themeSignal,this.subscriptions=new R(),this.isDragging=!1;}ngOnInit(){this.windowSize$=y(window,"resize").pipe(k(null),O(200),L(()=>window.innerWidth));}getGridStyle(e){let t=e??0;return this.drawerOpen=this.shareStateService.drawerSignal(),t<1510&&t>1338&&this.drawerOpen?{"grid-template-columns":"repeat(3, 1fr)"}:t<1338&&t>1168&&this.drawerOpen?{"grid-template-columns":"repeat(2, 1fr)"}:{};}entered(){this.transferringItem.set(void 0);}exited(e){this.transferringItem.set(e.item.data),console.log(this.transferringItem());}noReturnPredicate(){return!1;}removeCard(e){let t;this.selectedExercises().some((i,s)=>{i.id===e.id&&(t=s);}),this._resetCardState(e,t);}addToFavorites(e){this.userFavorites.update(t=>{let i=F(b({},t),{favExercises:[...t.favExercises,e.id]});return this._updateFavorites(this.userId(),i),i;});}removeFromFavorites(e){let t=this.userFavorites().favExercises.filter(i=>i!==e.id);this.userFavorites.update(i=>F(b({},i),{favExercises:[...t]})),this._updateFavorites(this.userId(),this.userFavorites());}_updateFavorites(e,t){let i=this.usersService.updateFavorites(e,t).subscribe(s=>console.log(s));this.subscriptions.add(i);}_resetCardState(e,t){this.exercises.length!==0&&this.exercises.find(i=>{i.id===e.id&&(i.isSelected=!1);});}onDragStarted(){this.isDragging=!0;}onDragEnded(){this.isDragging=!1;}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=g({type:r,selectors:[["sanareapp-exercises-grid"]],inputs:{exercises:"exercises"},decls:7,vars:8,consts:()=>{let e;return e="Zu deiner Suche wurden keine \xDCbungen gefunden",[e,["overlay-scrollbars","",1,"grid-container",3,"options","defer"],[1,"noExercisesFound"],[1,"fetchingDataSpinner"],["cdkDropList","","cdkDropListSortingDisabled","",1,"exercise-cards",3,"cdkDropListEntered","cdkDropListExited","cdkDropListData","ngStyle","cdkDropListEnterPredicate"],["diameter","50"],[1,"static-placeholder"],["cardWrapper","wrap-default","cdkDrag","",3,"removeExercise","favoriteExercise","removeFavoriteExercise","cdkDragStarted","cdkDragEnded","isEmptyPlaceholder","exercise","cdkDragData"],["class","exercise-card-placeholder",4,"cdkDragPlaceholder"],[1,"exercise-card-placeholder"],[1,"exercise-card-skeleton"],["cardWrapper","wrap-default",3,"exercise"]];},template:function(t,i){t&1&&(o(0,"div",1),m(1,Te,3,0,"div",2)(2,Ie,2,0,"div",3),o(3,"div",4),q(4,"async"),C("cdkDropListEntered",function(){return i.entered();})("cdkDropListExited",function(v){return i.exited(v);}),H(5,be,5,1,null,null,he),c()()),t&2&&(p("options",i.themeSignal()),E(),x((i.exercises==null?null:i.exercises.length)===0&&!i.isFetchingData()?1:-1),E(),x(i.isFetchingData()?2:-1),E(),p("cdkDropListData",i.exercises)("ngStyle",i.getGridStyle(J(4,6,i.windowSize$)))("cdkDropListEnterPredicate",i.noReturnPredicate),E(2),W(i.exercises));},dependencies:[Z,Q,Y,pe,de,ce,w,le,Ee],styles:[".noExercisesFound[_ngcontent-%COMP%]{text-align:center;margin:32px 0}"]});}}return r;})();export{di as ExercisesGridComponent};/**i18n:e33dda9241aa0d3f81605574177eca303a560132442e585b3107f4f1b4a47a86*/