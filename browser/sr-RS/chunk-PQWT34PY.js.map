{"version":3,"mappings":"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","names":["ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","column_r2","label","ɵɵtextInterpolate","row_r3","name","email","ɵɵtemplate","ClientsListComponent_For_13_Conditional_0_Conditional_2_mat_cell_0_Conditional_1_Template","ClientsListComponent_For_13_Conditional_0_Conditional_2_mat_cell_0_Conditional_2_Template","ɵɵconditional","deviceScreenSize_r4","isCompact","ClientsListComponent_For_13_Conditional_0_Conditional_2_mat_cell_0_Template","element_r5","key","ClientsListComponent_For_13_Conditional_0_Conditional_3_mat_cell_0_Template","ɵɵelementContainerStart","ClientsListComponent_For_13_Conditional_0_mat_header_cell_1_Template","ClientsListComponent_For_13_Conditional_0_Conditional_2_Template","ClientsListComponent_For_13_Conditional_0_Conditional_3_Template","ɵɵproperty","ɵɵlistener","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Conditional_1_Template_button_click_1_listener","ɵɵrestoreView","_r6","row_r7","ɵɵnextContext","$implicit","ctx_r7","ɵɵresetView","openEditClientDialog","id","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Conditional_1_Template_button_click_4_listener","openDeleteConfirmationDialog","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Conditional_2_Template_button_click_5_listener","_r9","ɵɵi18n","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Conditional_2_Template_button_click_10_listener","menu_r10","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Conditional_1_Template","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Conditional_2_Template","ClientsListComponent_For_13_Conditional_1_mat_header_cell_1_Template","ClientsListComponent_For_13_Conditional_1_mat_cell_2_Template","ClientsListComponent_For_13_Conditional_0_Template","ClientsListComponent_For_13_Conditional_1_Template","ɵɵi18nExp","input_r11","value","ɵɵpureFunction0","_c0","ClientsListComponent","_ClientsListComponent","constructor","pageType","clientsService","inject","ClientsService","_snackBar","MatSnackBar","dialog","MatDialog","router","Router","shareStateService","ShareStateService","ActivePageService","screenSizeService","ScreenSizeService","isFetchingData","screenSize","pageTitle","columnName","columnEmail","columnPhone","displayedColumns","columnKeys","computed","filter","column","map","col","dataSource","MatTableDataSource","clients","subscriptions","Subscription","shareClientsDataService","ShareClientsDataService","clientInfo","themeManager","ThemeManagerService","themeSignal","console","log","getClients","ngOnInit","set","clientId","clientName","programPosition","programId","programName","dateRange","start","end","ngAfterViewInit","paginator","sort","createClient","navigateByUrl","subscription","getClientsBasic","subscribe","clientsList","data","add","applyFilter","event","filterValue","target","trim","toLowerCase","firstPage","itemId","dialogRef","open","DeleteConfirmationDialogComponent","width","title","message","panelClass","afterClosed","result","deleteClient","close","next","duration","error","e","complete","info","ngOnDestroy","unsubscribe","selectors","viewQuery","ClientsListComponent_Query","rf","ctx","MatSort","MatPaginator","provide","MatPaginatorIntl","useClass","PaginatorI18nService","decls","vars","consts","i18n_0","ɵɵdeclareLet","ClientsListComponent_Template_ui_page_toolbar_newEvent_1_listener","_r1","ClientsListComponent_Template_input_keyup_6_listener","$event","ClientsListComponent_Conditional_10_Template","ɵɵrepeaterCreate","ClientsListComponent_For_13_Template","_forTrack0","ClientsListComponent_mat_header_row_14_Template","ClientsListComponent_mat_row_15_Template","ClientsListComponent_mat_row_16_Template","ClientsListComponent_Conditional_17_Template","ɵɵstoreLet","ɵɵrepeater","deviceScreenSize_r12","PageToolbarComponent","MatFormField","MatLabel","MatInput","OverlayscrollbarsModule","OverlayScrollbarsComponent","MatTableModule","MatTable","MatHeaderCellDef","MatHeaderRowDef","MatColumnDef","MatCellDef","MatRowDef","MatHeaderCell","MatCell","MatHeaderRow","MatRow","MatNoDataRow","MatSortModule","MatSortHeader","MatIconModule","MatIcon","MatTooltip","MatButtonModule","MatIconButton","MatPaginatorModule","MatMenuModule","MatMenu","MatMenuItem","MatMenuTrigger","MatProgressSpinnerModule","MatProgressSpinner","styles","className","filePath","lineNumber"],"ignoreList":[],"sources":["apps/sanare-app/src/app/pages/clients/clients-list/clients-list.component.html","apps/sanare-app/src/app/pages/clients/clients-list/clients-list.component.ts"],"sourcesContent":["@let deviceScreenSize = screenSize();\n\n<ui-page-toolbar\n  [pageTitle]=\"pageTitle()\"\n  [pageType]=\"pageType\"\n  [newButton]=\"true\"\n  (newEvent)=\"createClient()\"\n></ui-page-toolbar>\n\n<div class=\"table-wrapper\">\n  <mat-form-field class=\"rounded-filter-input\" appearance=\"fill\">\n    <mat-label i18n=\"@@ClientsList.inputFilterLabel\">Filter</mat-label>\n    <input\n      matInput\n      (keyup)=\"applyFilter($event)\"\n      i18n-placeholder=\"@@ClientsList.inputPlaceholder\"\n      placeholder=\"E.g. John Maurice\"\n      #input\n    />\n  </mat-form-field>\n\n  <!-- <div class=\"mat-elevation-z8 clients-table\"> -->\n  <div class=\"clients-table-container\">\n    <div\n      overlay-scrollbars\n      [options]=\"themeSignal()\"\n      [defer]\n      class=\"clients-list-table table-scroll-container\"\n    >\n      @if (isFetchingData()) {\n        <div class=\"fetchingDataSpinner\">\n          <mat-spinner diameter=\"50\"></mat-spinner>\n        </div>\n      }\n      <mat-table class=\"mat-table-background\" [dataSource]=\"dataSource\" matSort>\n        @for (column of displayedColumns; track column.key) {\n          @if (column.key !== 'options') {\n            <ng-container [matColumnDef]=\"column.key\">\n              <mat-header-cell *matHeaderCellDef mat-sort-header>\n                {{ column.label }}</mat-header-cell\n              >\n              @if (deviceScreenSize?.isCompact) {\n                <mat-cell *matCellDef=\"let row\" class=\"dynamic-cell\">\n                  @if (deviceScreenSize?.isCompact) {\n                    <span class=\"mat-body-large\">{{ row.name }}</span>\n                    <span class=\"mat-body-medium-secondary\">{{\n                      row.email\n                    }}</span>\n                  } @else {\n                    {{ row.name }}\n                  }\n                </mat-cell>\n              } @else {\n                <mat-cell *matCellDef=\"let element\">\n                  {{ element[column.key] }}\n                </mat-cell>\n              }\n            </ng-container>\n          } @else {\n            <ng-container matColumnDef=\"options\">\n              <mat-header-cell *matHeaderCellDef></mat-header-cell>\n              <mat-cell *matCellDef=\"let row\" class=\"client-options\">\n                @if (!deviceScreenSize?.isCompact) {\n                  <div>\n                    <button\n                      mat-icon-button\n                      matTooltip=\"Edit\"\n                      i18n-matTooltip=\"@@ClientsList.tableEditButtonTooltip\"\n                      aria-label=\"Edit icon button\"\n                      i18n-aria-label=\"@@ClientsList.tableEditButtonAriaLabel\"\n                      (click)=\"openEditClientDialog(row.id, row.name)\"\n                    >\n                      <mat-icon>edit</mat-icon>\n                    </button>\n                    <button\n                      mat-icon-button\n                      matTooltip=\"Delete\"\n                      i18n-matTooltip=\"@@ClientsList.tableDeleteButtonTooltip\"\n                      aria-label=\"Delete icon button\"\n                      i18n-aria-label=\"@@ClientsList.tableDeleteButtonAriaLabel\"\n                      (click)=\"openDeleteConfirmationDialog(row.id)\"\n                    >\n                      <mat-icon>delete_outline</mat-icon>\n                    </button>\n                  </div>\n                } @else {\n                  <button\n                    mat-icon-button\n                    [matMenuTriggerFor]=\"menu\"\n                    aria-label=\"Example icon-button with a menu\"\n                  >\n                    <mat-icon>more_vert</mat-icon>\n                  </button>\n                  <mat-menu #menu=\"matMenu\">\n                    <button\n                      mat-menu-item\n                      style=\"min-width: 200px\"\n                      (click)=\"openEditClientDialog(row.id, row.name)\"\n                    >\n                      <mat-icon>edit</mat-icon>\n                      <span i18n=\"@@ClientsList.tableEditButtonTooltip\"\n                        >Edit</span\n                      >\n                    </button>\n                    <button\n                      mat-menu-item\n                      (click)=\"openDeleteConfirmationDialog(row.id)\"\n                    >\n                      <mat-icon>delete_outline</mat-icon>\n                      <span i18n=\"@@ClientsList.tableDeleteButtonTooltip\"\n                        >Delete</span\n                      >\n                    </button>\n                  </mat-menu>\n                }\n              </mat-cell>\n            </ng-container>\n          }\n        }\n\n        <mat-header-row *matHeaderRowDef=\"columnKeys()\"></mat-header-row>\n        <mat-row\n          *matRowDef=\"let row; columns: columnKeys()\"\n          class=\"table-rows\"\n        ></mat-row>\n        <!-- Row shown when there is no matching data. -->\n        <mat-row class=\"mat-row\" *matNoDataRow>\n          <td\n            class=\"mat-cell\"\n            colspan=\"4\"\n            i18n=\"@@ClientsList.tableNoMatchingData\"\n          >\n            No data matching the filter \"{{ input.value }}\"\n          </td>\n        </mat-row>\n      </mat-table>\n    </div>\n    @if (!deviceScreenSize?.isCompact) {\n      <mat-paginator\n        pageSize=\"10\"\n        class=\"mat-paginator-background\"\n        [pageSizeOptions]=\"[5, 10, 25, 100]\"\n        i18n-aria-label=\"@@ClientsList.selectPageOfClientsAriaLabel\"\n        aria-label=\"Select page of clients\"\n      ></mat-paginator>\n    }\n  </div>\n</div>\n","/// <reference types=\"@angular/localize\" />\n\nimport {\n  AfterViewInit,\n  Component,\n  computed,\n  inject,\n  OnDestroy,\n  OnInit,\n  signal,\n  ViewChild,\n} from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n  MatPaginator,\n  MatPaginatorIntl,\n  MatPaginatorModule,\n} from '@angular/material/paginator';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatSort, MatSortModule } from '@angular/material/sort';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport {\n  Client,\n  ClientsService,\n  ShareClientsDataService,\n  ShareStateService,\n} from '@slowautomobile/exercises';\nimport { DeleteConfirmationDialogComponent } from 'libs/ui/src/lib/components/deleteConfirmationDialog/deleteConfirmationDialog.component';\n\nimport { Subscription } from 'rxjs';\nimport { Router } from '@angular/router';\nimport {\n  ActivePageService,\n  PaginatorI18nService,\n  ScreenSizeService,\n  ThemeManagerService,\n} from '@slowautomobile/ui';\nimport { MatTooltip } from '@angular/material/tooltip';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatButtonModule } from '@angular/material/button';\nimport { OverlayscrollbarsModule } from 'overlayscrollbars-ngx';\nimport { MatInput } from '@angular/material/input';\nimport { MatFormField, MatLabel } from '@angular/material/form-field';\nimport { PageToolbarComponent } from '@slowautomobile/ui';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\n\n@Component({\n  selector: 'sanareapp-clients-list',\n  templateUrl: './clients-list.component.html',\n  styleUrl: './clients-list.component.scss',\n  imports: [\n    PageToolbarComponent,\n    MatFormField,\n    MatLabel,\n    MatInput,\n    OverlayscrollbarsModule,\n    MatTableModule,\n    MatSortModule,\n    MatIconModule,\n    MatTooltip,\n    MatButtonModule,\n    MatPaginatorModule,\n    MatMenuModule,\n    MatProgressSpinnerModule,\n  ],\n  providers: [{ provide: MatPaginatorIntl, useClass: PaginatorI18nService }],\n})\nexport class ClientsListComponent implements OnInit, AfterViewInit, OnDestroy {\n  // Page info and inputs for ui-page-toolbar\n  // pageTitle = $localize`:@@ClientsList.pageTitle:Clients`;\n  // pageType = $localize`:@@ClientsList.pageType:client`;\n  pageType = 'client';\n\n  private clientsService = inject(ClientsService);\n  private _snackBar = inject(MatSnackBar);\n  dialog = inject(MatDialog);\n  private router = inject(Router);\n  private shareStateService = inject(ShareStateService);\n  ActivePageService = inject(ActivePageService);\n  private screenSizeService = inject(ScreenSizeService);\n\n  isFetchingData = this.shareStateService.isFetchingData;\n  screenSize = this.screenSizeService.screenSize;\n\n  pageTitle = this.ActivePageService.pageTitle;\n\n  columnName = $localize`:@@ClientsList.tableNameColumn:Name`;\n  columnEmail = $localize`:@@ClientsList.tableEmailColumn:Email`;\n  columnPhone = $localize`:@@ClientsList.tablePhoneColumn:Phone`;\n\n  displayedColumns: any[] = [\n    { key: 'name', label: this.columnName },\n    { key: 'email', label: this.columnEmail },\n    { key: 'phone', label: this.columnPhone },\n    { key: 'options', label: '' },\n  ];\n\n  columnKeys = computed(() => {\n    if (this.screenSize()?.isCompact) {\n      return this.displayedColumns\n        .filter(column => column.key !== 'phone' && column.key !== 'email')\n        .map(col => col.key);\n    } else {\n      return this.displayedColumns.map(col => col.key);\n    }\n  });\n\n  dataSource = new MatTableDataSource<Client>();\n  clients: Client[] = [];\n  removedClient!: any | null;\n  @ViewChild(MatSort) sort!: MatSort;\n  @ViewChild(MatPaginator) paginator!: MatPaginator;\n  subscriptions = new Subscription();\n  private shareClientsDataService = inject(ShareClientsDataService);\n  clientInfo = this.shareClientsDataService.clientInfo;\n\n  themeManager = inject(ThemeManagerService);\n  themeSignal = this.themeManager.themeSignal;\n\n  constructor() {\n    console.log(this.screenSize()?.isCompact);\n    // Get data and assign the data to the data source for the table to render\n    this.getClients();\n  }\n\n  ngOnInit(): void {\n    this.pageTitle.set($localize`:@@ClientsList.pageTitle:Clients`);\n\n    // Reset clientInfo() signal data\n    this.clientInfo.set({\n      clientId: '',\n      clientName: '',\n      programPosition: 0,\n      programId: '',\n      programName: '',\n      dateRange: { start: '', end: '' },\n    });\n  }\n\n  ngAfterViewInit() {\n    this.dataSource.paginator = this.paginator;\n    this.dataSource.sort = this.sort;\n  }\n\n  createClient() {\n    this.router.navigateByUrl('/clients/form');\n  }\n\n  private getClients() {\n    this.isFetchingData.set(true);\n\n    const subscription = this.clientsService\n      .getClientsBasic()\n      .subscribe(clientsList => {\n        // this.clients = [];\n        // clientsList.forEach(client => {\n        //   client.fullName = client.lastName + ' ' + client.firstName;\n        //   this.clients.push(client);\n        this.clients = clientsList;\n        // });\n        this.dataSource.data = this.clients;\n        console.log(this.dataSource.data);\n        this.isFetchingData.set(false);\n      });\n\n    this.subscriptions.add(subscription);\n  }\n\n  applyFilter(event: Event) {\n    const filterValue = (event.target as HTMLInputElement).value;\n    this.dataSource.filter = filterValue.trim().toLowerCase();\n\n    if (this.dataSource.paginator) {\n      this.dataSource.paginator.firstPage();\n    }\n  }\n\n  openEditClientDialog(clientId: string, clientName: string) {\n    this.clientInfo.set({\n      clientId: clientId,\n      clientName: clientName,\n      programPosition: 0,\n      programId: '',\n      programName: '',\n      dateRange: { start: '', end: '' },\n    });\n    this.router.navigateByUrl(`clients/form/${clientId}`);\n\n    // THIS IS ALTERNATIVE WHICH SHOULD BE IMPLEMENTED WHEN ALL SIGNAL DEPENDENCIES ARE ADJUSTED/REMOVED\n    // this.router.navigate([`clients/form/${clientId}`], {\n    //   queryParams: {\n    //     clientName: `${clientName}`,\n    //   },\n    // });\n  }\n\n  openDeleteConfirmationDialog(itemId: string): void {\n    const dialogRef = this.dialog.open(DeleteConfirmationDialogComponent, {\n      width: '312px',\n      data: {\n        title: $localize`:@@DeleteConfirmationDialog.deleteTitleClient:Delete selected client?`,\n        message: $localize`:@@DeleteConfirmationDialog.deleteMessageClient:Deleting the selected client will remove it from your account.`,\n      },\n      panelClass: 'custom-dialog',\n    });\n\n    const subscription = dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        // User confirmed deletion, handle deletion logic here\n        console.log('User confirmed deletion');\n        this.deleteClient(itemId);\n        dialogRef.close();\n      } else {\n        // User canceled deletion\n        console.log('User canceled deletion');\n        dialogRef.close();\n      }\n    });\n    this.subscriptions.add(subscription);\n  }\n\n  deleteClient(clientId: string) {\n    const subscription = this.clientsService.deleteClient(clientId).subscribe({\n      next: () => {\n        this.getClients();\n        this._snackBar.open(\n          $localize`:@@Snackbar.clientDeleted:Client deleted`,\n          '',\n          {\n            duration: 2000,\n            panelClass: ['custom-snackbar-style'],\n          },\n        );\n      },\n      error: e => console.error(e),\n      complete: () => console.info('Client deletion completed'),\n    });\n\n    this.subscriptions.add(subscription);\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n}\n"]}