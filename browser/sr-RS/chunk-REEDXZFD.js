import{B as Se,C as A,D as ue,E as I,F as ge,G as Te,H as Pe,I as Ee,J as Le,K as fe,L as Me,M as he,N as Ne,O as Ae,P as Ie,Q as be,R as xe,S as we,T as Oe,U as ye,V as ve,ca as Re,d as ae,da as De,j as _e,k as re,ma as $e,o as se,r as ce,s as me,t as Ce,ua as Fe,v as pe,va as ke,wa as Ge,x as de,xa as ze}from"./chunk-S2XPJ3VZ.js";import{C as ie,d as J,o as W,v as Y,z as Z}from"./chunk-CVGU5HRQ.js";import"./chunk-2YLEHCOH.js";import"./chunk-LE23UJO4.js";import{f as ee,k as te}from"./chunk-4VBJMM6S.js";import{a as ne,b as oe,c as le}from"./chunk-DUASGZV7.js";import"./chunk-K24FWMMJ.js";import{Bc as Q,Cb as c,Cc as j,Dc as N,Ec as U,Fc as K,Nb as d,Sb as g,Ub as B,Vb as X,Wb as o,Xb as _,Yb as P,Yc as q,Zb as b,_b as x,ac as M,e as G,ec as E,fc as V,gc as H,ic as T,jc as r,lb as s,na as C,oc as w,pc as O,qc as y,tc as v,uc as m,vc as R,wa as S,wc as h,xa as u,xb as z}from"./chunk-364YMQ47.js";var Be=()=>[5,10,25,100],Xe=(e,a)=>a.key;function Ve(e,a){e&1&&(o(0,"div",12),P(1,"mat-spinner",18),_());}function He(e,a){if(e&1&&(o(0,"mat-header-cell",23),m(1),_()),e&2){let t=r(2).$implicit;s(),h(" ",t.label,"");}}function Qe(e,a){if(e&1&&(o(0,"span",25),m(1),_(),o(2,"span",26),m(3),_()),e&2){let t=r().$implicit;s(),R(t.name),s(2),R(t.email);}}function je(e,a){if(e&1&&m(0),e&2){let t=r().$implicit;h(" ",t.name," ");}}function Ue(e,a){if(e&1&&(o(0,"mat-cell",22),c(1,Qe,4,2)(2,je,1,1),_()),e&2){r(4);let t=N(0);s(),g(t!=null&&t.isCompact?1:2);}}function Ke(e,a){e&1&&c(0,Ue,3,1,"mat-cell",24);}function qe(e,a){if(e&1&&(o(0,"mat-cell"),m(1),_()),e&2){let t=a.$implicit,i=r(3).$implicit;s(),h(" ",t[i.key]," ");}}function Je(e,a){e&1&&c(0,qe,2,1,"mat-cell",27);}function We(e,a){if(e&1&&(b(0,19),c(1,He,2,1,"mat-header-cell",21)(2,Ke,1,0,"mat-cell",22)(3,Je,1,0,"mat-cell"),x()),e&2){let t=r().$implicit;r();let i=N(0);d("matColumnDef",t.key),s(2),g(i!=null&&i.isCompact?2:3);}}function Ye(e,a){e&1&&P(0,"mat-header-cell");}function Ze(e,a){if(e&1){let t=M();o(0,"div")(1,"button",31),T("click",function(){S(t);let n=r().$implicit,l=r(3);return u(l.openEditClientDialog(n.id,n.name));}),o(2,"mat-icon"),m(3,"edit"),_()(),o(4,"button",32),T("click",function(){S(t);let n=r().$implicit,l=r(3);return u(l.openDeleteConfirmationDialog(n.id));}),o(5,"mat-icon"),m(6,"delete_outline"),_()()();}}function et(e,a){if(e&1){let t=M();o(0,"button",33)(1,"mat-icon"),m(2,"more_vert"),_()(),o(3,"mat-menu",null,1)(5,"button",34),T("click",function(){S(t);let n=r().$implicit,l=r(3);return u(l.openEditClientDialog(n.id,n.name));}),o(6,"mat-icon"),m(7,"edit"),_(),o(8,"span"),E(9,3),_()(),o(10,"button",35),T("click",function(){S(t);let n=r().$implicit,l=r(3);return u(l.openDeleteConfirmationDialog(n.id));}),o(11,"mat-icon"),m(12,"delete_outline"),_(),o(13,"span"),E(14,4),_()()();}if(e&2){let t=v(4);d("matMenuTriggerFor",t);}}function tt(e,a){if(e&1&&(o(0,"mat-cell",30),c(1,Ze,7,0,"div")(2,et,15,1),_()),e&2){r(3);let t=N(0);s(),g(t!=null&&t.isCompact?2:1);}}function it(e,a){e&1&&(b(0,20),c(1,Ye,1,0,"mat-header-cell",28)(2,tt,3,1,"mat-cell",29),x());}function nt(e,a){if(e&1&&c(0,We,4,2,"ng-container",19)(1,it,3,0,"ng-container",20),e&2){let t=a.$implicit;g(t.key!=="options"?0:1);}}function ot(e,a){e&1&&P(0,"mat-header-row");}function lt(e,a){e&1&&P(0,"mat-row",36);}function at(e,a){if(e&1&&(o(0,"mat-row",37)(1,"td",38),E(2,5),_()()),e&2){r();let t=v(7);s(2),V(t.value),H(2);}}function _t(e,a){e&1&&P(0,"mat-paginator",17),e&2&&d("pageSizeOptions",K(1,Be));}var Gt=(()=>{class e{constructor(){this.pageType="client",this.clientsService=C(_e),this._snackBar=C(ie),this.dialog=C(se),this.router=C(J),this.shareStateService=C(ae),this.ActivePageService=C(Ce),this.screenSizeService=C(pe),this.isFetchingData=this.shareStateService.isFetchingData,this.screenSize=this.screenSizeService.screenSize,this.pageTitle=this.ActivePageService.pageTitle,this.columnName=" Ime ",this.columnEmail=" E-po\u0161ta ",this.columnPhone=" Telefon ",this.displayedColumns=[{key:"name",label:this.columnName},{key:"email",label:this.columnEmail},{key:"phone",label:this.columnPhone},{key:"options",label:""}],this.columnKeys=q(()=>this.screenSize()?.isCompact?this.displayedColumns.filter(t=>t.key!=="phone"&&t.key!=="email").map(t=>t.key):this.displayedColumns.map(t=>t.key)),this.dataSource=new Oe(),this.clients=[],this.subscriptions=new G(),this.shareClientsDataService=C(re),this.clientInfo=this.shareClientsDataService.clientInfo,this.themeManager=C(ce),this.themeSignal=this.themeManager.themeSignal,console.log(this.screenSize()?.isCompact),this.getClients();}ngOnInit(){this.pageTitle.set("Pacijenti"),this.clientInfo.set({clientId:"",clientName:"",programPosition:0,programId:"",programName:"",dateRange:{start:"",end:""}});}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort;}createClient(){this.router.navigateByUrl("/clients/form");}getClients(){this.isFetchingData.set(!0);let t=this.clientsService.getClientsBasic().subscribe(i=>{this.clients=i,this.dataSource.data=this.clients,console.log(this.dataSource.data),this.isFetchingData.set(!1);});this.subscriptions.add(t);}applyFilter(t){let i=t.target.value;this.dataSource.filter=i.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage();}openEditClientDialog(t,i){this.clientInfo.set({clientId:t,clientName:i,programPosition:0,programId:"",programName:"",dateRange:{start:"",end:""}}),this.router.navigateByUrl(`clients/form/${t}`);}openDeleteConfirmationDialog(t){let i=this.dialog.open($e,{width:"312px",data:{title:"Izbri\u0161i izabranog pacijenta?",message:"Brisanje izabranog pacijenta \u0107e ga ukloniti sa va\u0161eg naloga."},panelClass:"custom-dialog"}),n=i.afterClosed().subscribe(l=>{l?(console.log("User confirmed deletion"),this.deleteClient(t),i.close()):(console.log("User canceled deletion"),i.close());});this.subscriptions.add(n);}deleteClient(t){let i=this.clientsService.deleteClient(t).subscribe({next:()=>{this.getClients(),this._snackBar.open("Pacijent izbrisan","",{duration:2e3,panelClass:["custom-snackbar-style"]});},error:n=>console.error(n),complete:()=>console.info("Client deletion completed")});this.subscriptions.add(i);}ngOnDestroy(){this.subscriptions.unsubscribe();}static{this.ɵfac=function(i){return new(i||e)();};}static{this.ɵcmp=z({type:e,selectors:[["sanareapp-clients-list"]],viewQuery:function(i,n){if(i&1&&(w(I,5),w(A,5)),i&2){let l;O(l=y())&&(n.sort=l.first),O(l=y())&&(n.paginator=l.first);}},features:[U([{provide:Se,useClass:me}])],decls:18,vars:10,consts:()=>{let t;t="Npr. Petar Petrovi\u0107";let i;i="Izaberite stranicu pacijenata";let n;n="Filter";let l;l="Uredi";let L;L="Dugme za ure\u0111ivanje";let f;f="Izbri\u0161i";let D;D="Dugme za brisanje";let $;$="Uredi";let F;F="Izbri\u0161i";let k;return k=" Nema podataka koji odgovaraju filteru \""+"\uFFFD0\uFFFD"+"\" ",[["input",""],["menu","matMenu"],n,$,F,k,[3,"newEvent","pageTitle","pageType","newButton"],[1,"table-wrapper"],["appearance","fill",1,"rounded-filter-input"],["matInput","","placeholder",t,3,"keyup"],[1,"clients-table-container"],["overlay-scrollbars","",1,"clients-list-table","table-scroll-container",3,"options","defer"],[1,"fetchingDataSpinner"],["matSort","",1,"mat-table-background",3,"dataSource"],[4,"matHeaderRowDef"],["class","table-rows",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","10","aria-label",i,1,"mat-paginator-background",3,"pageSizeOptions"],["diameter","50"],[3,"matColumnDef"],["matColumnDef","options"],["mat-sort-header","",4,"matHeaderCellDef"],[1,"dynamic-cell"],["mat-sort-header",""],["class","dynamic-cell",4,"matCellDef"],[1,"mat-body-large"],[1,"mat-body-medium-secondary"],[4,"matCellDef"],[4,"matHeaderCellDef"],["class","client-options",4,"matCellDef"],[1,"client-options"],["mat-icon-button","","matTooltip",l,"aria-label",L,3,"click"],["mat-icon-button","","matTooltip",f,"aria-label",D,3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["mat-menu-item","",2,"min-width","200px",3,"click"],["mat-menu-item","",3,"click"],[1,"table-rows"],[1,"mat-row"],["colspan","4",1,"mat-cell"]];},template:function(i,n){if(i&1){let l=M();Q(0),o(1,"ui-page-toolbar",6),T("newEvent",function(){return S(l),u(n.createClient());}),_(),o(2,"div",7)(3,"mat-form-field",8)(4,"mat-label"),E(5,2),_(),o(6,"input",9,0),T("keyup",function(f){return S(l),u(n.applyFilter(f));}),_()(),o(8,"div",10)(9,"div",11),c(10,Ve,2,0,"div",12),o(11,"mat-table",13),B(12,nt,2,1,null,null,Xe),c(14,ot,1,0,"mat-header-row",14)(15,lt,1,0,"mat-row",15)(16,at,3,1,"mat-row",16),_()(),c(17,_t,1,2,"mat-paginator",17),_()();}if(i&2){let l=j(n.screenSize());s(),d("pageTitle",n.pageTitle())("pageType",n.pageType)("newButton",!0),s(8),d("options",n.themeSignal()),s(),g(n.isFetchingData()?10:-1),s(),d("dataSource",n.dataSource),s(),X(n.displayedColumns),s(2),d("matHeaderRowDef",n.columnKeys()),s(),d("matRowDefColumns",n.columnKeys()),s(2),g(l!=null&&l.isCompact?-1:17);}},dependencies:[de,Y,W,Z,ve,ye,we,Pe,Le,Ne,fe,Ee,Ae,Me,he,Ie,be,xe,Te,I,ge,oe,ne,le,te,ee,ue,A,ze,ke,Fe,Ge,De,Re],styles:['.fetchingDataSpinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;left:4px;right:4px;top:4px;width:calc(100% - 20px);height:100%;border-top-left-radius:16px;border-top-right-radius:16px}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 234px);overflow-y:hidden}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .client-options[_ngcontent-%COMP%]{justify-content:end}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]{height:calc(100vh - 290px);overflow-y:scroll}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]   .table-rows[_ngcontent-%COMP%]{height:48px}@media (max-width: 599px){.table-wrapper[_ngcontent-%COMP%]{padding:16px;height:100%}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]{margin-top:-8px;height:calc(100vh - 228px)}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]{height:calc(100vh - 228px);padding-bottom:84px}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]   .table-rows[_ngcontent-%COMP%]{height:auto}}.dynamic-cell[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;padding:8px}.programs-table-skeleton[_ngcontent-%COMP%]{width:100%;height:440px;overflow:hidden}.programs-table-skeleton[_ngcontent-%COMP%]   .row-skeleton[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:14px;height:48px;border-bottom-width:1px;border-bottom-style:solid}.programs-table-skeleton[_ngcontent-%COMP%]   .row-skeleton[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-radius:16px;min-width:193px;height:30px;overflow:hidden;position:relative;width:100%}.programs-table-skeleton[_ngcontent-%COMP%]   .row-skeleton[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 1s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}.programs-table-skeleton[_ngcontent-%COMP%]   .row-skeleton[_ngcontent-%COMP%]:last-of-type{border-bottom:0}']});}}return e;})();export{Gt as ClientsListComponent};/**i18n:ab11a1dcb816b11965daf92ebc4252f70aaa11f3a07066be31c4bdd61d35557d*/