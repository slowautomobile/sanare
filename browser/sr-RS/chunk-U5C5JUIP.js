import{S as ce,T as de,a as ne,aa as Ee,ba as le,c as T,d as I,k as se,n as ae,q as _e,ra as Se,ua as me,wa as pe,xa as xe}from"./chunk-PTYWA22Q.js";import"./chunk-HW6RE37E.js";import"./chunk-BC2OAFMA.js";import{B as h,j as ee}from"./chunk-HDZ7RHYU.js";import{f as ie,j as te}from"./chunk-25VDOFRO.js";import"./chunk-EA5Y5PYU.js";import{a as re,c as oe}from"./chunk-LIFEMK2A.js";import"./chunk-UKSWDLTM.js";import{a as Ce}from"./chunk-4U4BN4RS.js";import"./chunk-L5RXOLJO.js";import"./chunk-JURCKSUK.js";import{$ as k,$b as A,B as y,Bb as m,Fc as q,Gc as J,Ia as f,Ib as V,Kb as z,L as O,Mb as p,Rb as u,Tb as H,Ub as W,Ud as K,Vb as o,Wb as c,Xb as P,a as X,b as F,dc as B,de as Q,e as g,fe as Y,hc as C,ic as n,kb as E,ma as l,sc as w,tc as x,u as L,uc as U,ue as Z,va as a,vc as j,wa as _,wb as R}from"./chunk-BLHYBFZJ.js";function Ae(r,d){if(r&1){let e=A();o(0,"button",14),C("click",function(){a(e);let i=n(2);return _(i.removeFromFavorites(i.exercise));}),o(1,"mat-icon"),x(2,"star"),c()();}}function ve(r,d){if(r&1){let e=A();o(0,"button",15),C("click",function(){a(e);let i=n(2);return _(i.addToFavorites(i.exercise));}),o(1,"mat-icon"),x(2,"star_border"),c()();}}function Pe(r,d){if(r&1){let e=A();o(0,"button",16),C("click",function(){a(e);let i=n(2);return _(i.removeFromSelected(i.exercise));})("mouseenter",function(){a(e);let i=n(2);return _(i.showHoverIcon(!0));})("mouseleave",function(){a(e);let i=n(2);return _(i.showHoverIcon(!1));}),o(1,"mat-icon"),x(2),c()();}if(r&2){let e=n(2);p("color",e.isHovered?"accent":"primary"),E(2),U(e.isHovered?"close":"done");}}function fe(r,d){if(r&1){let e=A();o(0,"button",17),C("click",function(){a(e);let i=n(2);return _(i.addToSelected(i.exercise));}),o(1,"mat-icon"),x(2,"add"),c()();}}function ge(r,d){if(r&1){let e=A();o(0,"div",2)(1,"div",3),C("mouseenter",function(){a(e);let i=w(3);return _(i.onMouseEnter());})("mouseleave",function(){a(e);let i=w(3);return _(i.onMouseLeave());}),P(2,"ui-video-player",4,0),c(),o(4,"div",5)(5,"div",6)(6,"span",7),x(7),c()(),o(8,"div",8),m(9,Ae,3,0,"button",9)(10,ve,3,0,"button",10),o(11,"button",11),C("click",function(){a(e);let i=n();return _(i.showExerciseModal(i.exercise.id,i.exercise,!1));}),o(12,"mat-icon"),x(13,"info_outline"),c()(),m(14,Pe,3,2,"button",12)(15,fe,3,0,"button",13),c()()();}if(r&2){let e=n();E(2),p("videoSrc",e.exercise.video)("thumbnail",e.exercise.images==null?null:e.exercise.images.mainImg)("isModal",!1),E(5),j(" ",e.exercise.name[e.selectedLanguage]," "),E(2),u(e.exercise.isFavorite?9:10),E(5),u(e.exercise.isSelected?14:15);}}var G=(()=>{class r{constructor(){this.dialog=l(ae),this.exercisesService=l(ne),this.shareStateService=l(T),this.selectedExercisesService=l(I),this.usersService=l(h),this.localstorageService=l(ee),this.subscriptions=new g(),this.isEmptyPlaceholder=!1,this.selectedExercise=f(),this.removeExercise=f(),this.favoriteExercise=f(),this.removeFavoriteExercise=f(),this.isHovered=!1,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId;}ngOnInit(){this.selectedLanguage=this._getUserLanguageToken();}addToSelected(e){this.selectedExercisesService.addToSelected(e);}removeFromSelected(e){this.selectedExercisesService.removeFromSelected(e);}selectExercise(e){e.isSelected=!0,this.selectedExercise.emit(e);}removeCard(e){this.removeExercise.emit(e);}showHoverIcon(e){this.isHovered=e;}_getExercise(e){return this.exercisesService.getExercise(e);}showExerciseModal(e,t,i){let s=this._getExercise(e).subscribe(v=>{this.dialog.open(Se,{data:{fullExercise:v,exerciseCard:t,isProgramExercise:i,selectedLang:this.selectedLanguage},width:"500px",panelClass:["custom-dialog",i?"custom-shadow":""],backdropClass:i?"custom-backdrop":""});});this.subscriptions.add(s);}addToFavorites(e){e.isFavorite=!0,this.favoriteExercise.emit(e);}removeFromFavorites(e){e.isFavorite=!1,this.removeFavoriteExercise.emit(e);}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")?.split("-")[0];}ngOnDestroy(){this.subscriptions.unsubscribe();}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=R({type:r,selectors:[["sanareapp-exercise-card"]],inputs:{exercise:"exercise",cardWrapper:"cardWrapper",isEmptyPlaceholder:"isEmptyPlaceholder"},outputs:{selectedExercise:"selectedExercise",removeExercise:"removeExercise",favoriteExercise:"favoriteExercise",removeFavoriteExercise:"removeFavoriteExercise"},decls:2,vars:2,consts:()=>{let e;e="Ukloni iz omiljenih";let t;t="Omiljena ikona-dugme sa ikonom zvezde";let i;i="Dodaj u omiljene";let s;s="Omiljena ikona-dugme sa ikonom zvezde";let v;v="Detalji";let $;$="Info ikona-dugme sa ikonom info";let D;D="Ukloni ve\u017Ebu";let M;M="Ukloni ikonu-dugme sa ikonom za zatvaranje";let N;N="Dodaj ve\u017Ebu";let b;return b="Dodaj dugme ikone sa ikonom dodavanja",[["videoPlayer",""],[3,"ngClass"],[1,"card"],[1,"card-head",3,"mouseenter","mouseleave"],[3,"videoSrc","thumbnail","isModal"],[1,"card-body"],[1,"exercise-name"],[1,"multi-line-text"],[1,"card-icons"],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star"],["mat-icon-button","","matTooltip",i,"aria-label",s],["mat-icon-button","","matTooltip",v,"aria-label",$,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",M,1,"toggleDoneRemoveBtn",3,"color"],["mat-icon-button","","matTooltip",N,"color","primary","aria-label",b],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star",3,"click"],["mat-icon-button","","matTooltip",i,"aria-label",s,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",M,1,"toggleDoneRemoveBtn",3,"click","mouseenter","mouseleave","color"],["mat-icon-button","","matTooltip",N,"color","primary","aria-label",b,3,"click"]];},template:function(t,i){t&1&&(o(0,"div",1),m(1,ge,16,6,"div",2),c()),t&2&&(p("ngClass",i.cardWrapper),E(),u(i.isEmptyPlaceholder?-1:1));},dependencies:[K,ie,oe,re,te,Ce],styles:["[_nghost-%COMP%]{border-radius:16px}"]});}}return r;})();var Re=()=>[me,xe,G],he=(r,d)=>d.id;function Te(r,d){r&1&&(o(0,"div",2)(1,"span"),B(2,0),c()());}function Ie(r,d){r&1&&(o(0,"div",3),P(1,"mat-spinner",5),c());}function De(r,d){r&1&&P(0,"div",9);}function Me(r,d){if(r&1){let e=A();o(0,"sanareapp-exercise-card",7),C("removeExercise",function(i){a(e);let s=n(2);return _(s.removeCard(i));})("favoriteExercise",function(i){a(e);let s=n(2);return _(s.addToFavorites(i));})("removeFavoriteExercise",function(i){a(e);let s=n(2);return _(s.removeFromFavorites(i));})("cdkDragStarted",function(){a(e);let i=n(2);return _(i.onDragStarted());})("cdkDragEnded",function(){a(e);let i=n(2);return _(i.onDragEnded());}),m(1,De,1,0,"div",8),c();}if(r&2){let e=n().$implicit;p("isEmptyPlaceholder",!1)("exercise",e)("cdkDragData",e);}}function Ne(r,d){r&1&&P(0,"div",10);}function be(r,d){if(r&1&&(o(0,"div",6)(1,"sanareapp-exercise-card",11),x(2," >"),c()()),r&2){let e=n().$implicit;E(),p("exercise",e);}}function Xe(r,d){if(r&1&&(m(0,Me,2,3)(1,Ne,1,0),V(2,0,Re,null,1),z(),m(4,be,3,1,"div",6)),r&2){let e=d.$implicit,t=n();E(4),u(t.transferringItem()===e?4:-1);}}var di=(()=>{class r{constructor(){this.themeManager=l(_e),this.shareStateService=l(T),this.selectedExercisesService=l(I),this.usersService=l(h),this.transferringItemService=l(se),this.isFetchingData=this.shareStateService.isFetchingData,this.transferringItem=this.transferringItemService.transferringItem,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId,this.selectedExercises=this.selectedExercisesService.selectedExercises,this.themeSignal=this.themeManager.themeSignal,this.subscriptions=new g(),this.isDragging=!1;}ngOnInit(){this.windowSize$=y(window,"resize").pipe(k(null),O(200),L(()=>window.innerWidth));}getGridStyle(e){let t=e??0;return this.drawerOpen=this.shareStateService.drawerSignal(),t<1510&&t>1338&&this.drawerOpen?{"grid-template-columns":"repeat(3, 1fr)"}:t<1338&&t>1168&&this.drawerOpen?{"grid-template-columns":"repeat(2, 1fr)"}:{};}entered(){this.transferringItem.set(void 0);}exited(e){this.transferringItem.set(e.item.data),console.log(this.transferringItem());}noReturnPredicate(){return!1;}removeCard(e){let t;this.selectedExercises().some((i,s)=>{i.id===e.id&&(t=s);}),this._resetCardState(e,t);}addToFavorites(e){this.userFavorites.update(t=>{let i=F(X({},t),{favExercises:[...t.favExercises,e.id]});return this._updateFavorites(this.userId(),i),i;});}removeFromFavorites(e){let t=this.userFavorites().favExercises.filter(i=>i!==e.id);this.userFavorites.update(i=>F(X({},i),{favExercises:[...t]})),this._updateFavorites(this.userId(),this.userFavorites());}_updateFavorites(e,t){let i=this.usersService.updateFavorites(e,t).subscribe(s=>console.log(s));this.subscriptions.add(i);}_resetCardState(e,t){this.exercises.length!==0&&this.exercises.find(i=>{i.id===e.id&&(i.isSelected=!1);});}onDragStarted(){this.isDragging=!0;}onDragEnded(){this.isDragging=!1;}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=R({type:r,selectors:[["sanareapp-exercises-grid"]],inputs:{exercises:"exercises"},decls:7,vars:8,consts:()=>{let e;return e="Nema prona\u0111enih ve\u017Ebi za va\u0161u pretragu",[e,["overlay-scrollbars","",1,"grid-container",3,"options","defer"],[1,"noExercisesFound"],[1,"fetchingDataSpinner"],["cdkDropList","","cdkDropListSortingDisabled","",1,"exercise-cards",3,"cdkDropListEntered","cdkDropListExited","cdkDropListData","ngStyle","cdkDropListEnterPredicate"],["diameter","50"],[1,"static-placeholder"],["cardWrapper","wrap-default","cdkDrag","",3,"removeExercise","favoriteExercise","removeFavoriteExercise","cdkDragStarted","cdkDragEnded","isEmptyPlaceholder","exercise","cdkDragData"],["class","exercise-card-placeholder",4,"cdkDragPlaceholder"],[1,"exercise-card-placeholder"],[1,"exercise-card-skeleton"],["cardWrapper","wrap-default",3,"exercise"]];},template:function(t,i){t&1&&(o(0,"div",1),m(1,Te,3,0,"div",2)(2,Ie,2,0,"div",3),o(3,"div",4),q(4,"async"),C("cdkDropListEntered",function(){return i.entered();})("cdkDropListExited",function(v){return i.exited(v);}),H(5,Xe,5,1,null,null,he),c()()),t&2&&(p("options",i.themeSignal()),E(),u((i.exercises==null?null:i.exercises.length)===0&&!i.isFetchingData()?1:-1),E(),u(i.isFetchingData()?2:-1),E(),p("cdkDropListData",i.exercises)("ngStyle",i.getGridStyle(J(4,6,i.windowSize$)))("cdkDropListEnterPredicate",i.noReturnPredicate),E(2),W(i.exercises));},dependencies:[Z,Q,Y,pe,de,ce,G,le,Ee],styles:[".noExercisesFound[_ngcontent-%COMP%]{text-align:center;margin:32px 0}.fetchingDataSpinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;left:4px;right:4px;top:4px;width:calc(100% - 20px);height:100%;border-top-left-radius:16px;border-top-right-radius:16px}"]});}}return r;})();export{di as ExercisesGridComponent};/**i18n:e33dda9241aa0d3f81605574177eca303a560132442e585b3107f4f1b4a47a86*/