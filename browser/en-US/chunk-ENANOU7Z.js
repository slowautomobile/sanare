import{a as H,b as V}from"./chunk-HCYIKZQU.js";import{c as x,q as U,s as B,v as X,w as z,x as F,y as W}from"./chunk-FZMRAGOW.js";import"./chunk-RSMIBKOY.js";import{A as $,B as D,d as b,j as G,o as w,q as R,v as y,y as k}from"./chunk-WJHGPIFU.js";import"./chunk-RMMHKIN7.js";import"./chunk-CKH53T4H.js";import"./chunk-KZKNA7SH.js";import"./chunk-KIGNZCJX.js";import{D as L,o as O,t as I}from"./chunk-SPKIK5QY.js";import{Bb as E,Mb as p,Rb as f,Sb as M,Tb as C,Ub as A,Vb as s,Wb as i,dc as _,e as h,hc as c,kb as l,ma as r,tc as N,uc as v,wb as P,xc as u,yc as d,zc as m}from"./chunk-RFHWMCR2.js";function j(a,T){if(a&1&&(s(0,"mat-option",14),N(1),i()),a&2){let t=T.$implicit;p("value",t.code),l(),v(t.name);}}function q(a,T){a&1&&(s(0,"mat-hint"),_(1,4),i());}var ce=(()=>{class a{constructor(){this.router=r(b),this.themeManager=r(U),this.localstorageService=r(G),this.usersService=r(D),this.shareStateService=r(x),this.activePageTitle=r(B),this.pageTitle=this.activePageTitle.pageTitle,this.backNavigation=this.activePageTitle.backNavigation,this.userId=this.usersService.userId,this.selectValueChanged=!1,this.isDarkSignal=this.themeManager.isDark,this.isDark=!1,this.subscriptions=new h(),this.isLoading=this.shareStateService.isLoading,this.languages=[{name:"English",code:"en-US"},{name:"Deutsch",code:"de-DE"},{name:"Srpski",code:"sr-RS"}];}ngOnInit(){this.pageTitle.set("Settings"),this.backNavigation.set(!0),this.isDark=this.isDarkSignal(),this.selectedLanguage=this._getUserLanguageToken(),console.log(this.selectedLanguage);}switchTheme(){this.isDark?this.themeManager.changeTheme("dark"):this.themeManager.changeTheme("light");}onSubmit(){this.isLoading.set(!0),this.selectValueChanged?this._setAndUpdateUserLanguageToken(this.selectedLanguage):(this.isLoading.set(!1),this.router.navigateByUrl("/")),console.log(this.selectedLanguage);}onBack(){this.router.navigateByUrl("");}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")||"en-US";}_setAndUpdateUserLanguageToken(t){this.localstorageService.setToken("userLanguage",t);let o=this.usersService.updateUserLanguage(this.userId(),{langCode:t}).subscribe(()=>{this.isLoading.set(!1),location.replace(`${window.location.origin}/${t}/`);});this.subscriptions.add(o);}ngOnDestroy(){this.subscriptions.unsubscribe(),this.backNavigation.set(!1);}static{this.ɵfac=function(o){return new(o||a)();};}static{this.ɵcmp=P({type:a,selectors:[["sanareapp-settings"]],decls:18,vars:6,consts:()=>{let t;t=" User interface ";let o;o="Dark mode";let e;e="Language settings";let g;g="Select your default language";let n;return n="Changes will take effect after saving",[t,o,e,g,n,[1,"page-container"],[3,"cancelEvent","submitEvent","pageTitle","cancelButton","submitButton"],[1,"settings-wrapper"],[1,"mat-title-medium-margin-plus"],[1,"theme-toggle-wrapper"],["labelPosition","before",1,"mat-headline-small",3,"ngModelChange","change","ngModel"],[1,"language-wrapper"],["appearance","outline"],[3,"valueChange","value"],[3,"value"]];},template:function(o,e){o&1&&(s(0,"div",5)(1,"ui-page-toolbar",6),c("cancelEvent",function(){return e.onBack();})("submitEvent",function(){return e.onSubmit();}),i(),s(2,"div",7)(3,"h3",8),_(4,0),i(),s(5,"div",9)(6,"mat-slide-toggle",10),m("ngModelChange",function(n){return d(e.isDark,n)||(e.isDark=n),n;}),c("change",function(){return e.switchTheme();}),_(7,1),i()(),s(8,"div",11)(9,"p"),_(10,2),i(),s(11,"mat-form-field",12)(12,"mat-label"),_(13,3),i(),s(14,"mat-select",13),m("valueChange",function(n){return d(e.selectedLanguage,n)||(e.selectedLanguage=n),n;}),c("valueChange",function(){return e.selectValueChanged=!0;}),C(15,j,2,2,"mat-option",14,M),i(),E(17,q,2,0,"mat-hint"),i()()()()),o&2&&(l(),p("pageTitle",e.pageTitle())("cancelButton",!0)("submitButton",!0),l(5),u("ngModel",e.isDark),l(8),u("value",e.selectedLanguage),l(),A(e.languages),l(2),f(e.selectValueChanged?17:-1));},dependencies:[L,O,I,$,y,w,R,W,F,z,k,V,H,X],styles:[".fetchingDataSpinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;left:4px;right:4px;top:4px;width:calc(100% - 20px);height:100%;border-top-left-radius:16px;border-top-right-radius:16px}  .mat-mdc-slide-toggle .mat-internal-form-field{width:100%}  .mdc-label{flex-grow:1;font-family:Inter,sans-serif;font-size:16px}.page-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:16px}.page-container[_ngcontent-%COMP%]   .settings-wrapper[_ngcontent-%COMP%]{max-width:700px;padding:16px;border-radius:16px}.page-container[_ngcontent-%COMP%]   .settings-wrapper[_ngcontent-%COMP%]   .theme-toggle-wrapper[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{width:100%}.page-container[_ngcontent-%COMP%]   .settings-wrapper[_ngcontent-%COMP%]   .language-wrapper[_ngcontent-%COMP%]{margin-top:16px}.page-container[_ngcontent-%COMP%]   .settings-wrapper[_ngcontent-%COMP%]   .copyright-block[_ngcontent-%COMP%]{position:absolute;bottom:50px}@media (max-width: 599px){.page-container[_ngcontent-%COMP%]{padding:24px;width:100%;max-width:600px;height:fit-content;gap:16px}.page-container[_ngcontent-%COMP%]   .settings-wrapper[_ngcontent-%COMP%]{width:100%;padding:0;order:1}.page-container[_ngcontent-%COMP%]   ui-page-toolbar[_ngcontent-%COMP%]{order:2}}"]});}}return a;})();export{ce as SettingsComponent};/**i18n:e33dda9241aa0d3f81605574177eca303a560132442e585b3107f4f1b4a47a86*/