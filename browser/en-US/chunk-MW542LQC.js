import{d as M,k as y,pa as N,qa as X,ra as $,ta as O,ua as V}from"./chunk-JDGQ6WM5.js";import"./chunk-2GEWN2MC.js";import{j as k}from"./chunk-BSZJI6U7.js";import"./chunk-K53QMYLR.js";import"./chunk-ZKBEGGWX.js";import{f as R}from"./chunk-WKYQEPWK.js";import{a as w}from"./chunk-7BW4BDH3.js";import"./chunk-TZSEGQJU.js";import{$b as x,Bb as m,Mb as _,Rb as v,Tb as T,Ub as h,Vb as s,Wb as n,Xb as p,dc as P,hc as u,ib as f,ic as C,kb as d,ma as S,tc as g,ue as A,va as l,vc as D,wa as E,wb as I}from"./chunk-BLHYBFZJ.js";var b=(r,o)=>o.id;function G(r,o){r&1&&p(0,"div",12);}function F(r,o){if(r&1){let e=x();s(0,"div",4)(1,"div",6)(2,"div",7),p(3,"img",8),n(),s(4,"p",9),g(5),n(),s(6,"button",10),u("click",function(){let i=l(e).$implicit,c=C();return E(c.removeFromSelected(i));}),s(7,"mat-icon"),g(8,"close"),n()()(),m(9,G,1,0,"div",11),n();}if(r&2){let e=o.$implicit,t=C();_("cdkDragPreviewClass",t.previewClass),d(3),_("src",e.images==null?null:e.images.mainImg,f)("alt",e.name[t.selectedLanguage]),d(2),D(" ",e.name[t.selectedLanguage]," ");}}function z(r,o){r&1&&(s(0,"div",5)(1,"span",13),P(2,1),n(),s(3,"div",14),p(4,"mat-icon",15),n()()),r&2&&(d(4),_("inline",!0));}var Z=(()=>{class r{constructor(){this.selectedExercisesService=S(M),this.transferringItemService=S(y),this.localstorageService=S(k),this.transferringItem=this.transferringItemService.transferringItem,this.previewClass="custom-preview",this.enteredSelectedList=!1,this.selectedExercises=this.selectedExercisesService.selectedExercises;}ngOnInit(){this.selectedLanguage=this._getUserLanguageToken();}drop(e){e.previousContainer.id!==e.container.id&&!e.container.data.some(t=>t.id===e.previousContainer.data[e.previousIndex].id)?(this.selectedExercisesService.addToSelected(e.previousContainer.data[e.previousIndex]),X(e.previousContainer.data,e.container.data,e.previousIndex,e.currentIndex),e.previousContainer.data[e.previousIndex].isSelected=!0,console.log(e.previousContainer.data[e.previousIndex]),console.log(this.selectedExercises()),console.log(this.transferringItem())):N(e.container.data,e.previousIndex,e.currentIndex),this.transferringItem.set(void 0),this.enteredSelectedList=!1;}enteredSelected(e){this.enteredSelectedList=!0;}exitedSelected(e){this.transferringItem.set(void 0),this.enteredSelectedList=!1;}removeFromSelected(e){console.log(this.selectedExercisesService.selectedExercises()),this.removeCard(e),this.selectedExercisesService.removeFromSelected(e),console.log(this.selectedExercisesService.selectedExercises());}removeCard(e){let t;this.selectedExercises().some((i,c)=>{i.id===e.id&&(t=c);}),this._resetCardState(e,t);}_resetCardState(e,t){this.exercises.length!==0&&this.exercises.find(i=>{i.id===e.id&&(i.isSelected=!1);});}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")?.split("-")[0];}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=I({type:r,selectors:[["sanareapp-selected-exercises-list"]],inputs:{exercises:"exercises"},decls:6,vars:2,consts:()=>{let e;e="List icon";let t;return t="Add exercises",[["selected","cdkDropList"],t,[1,"background-wrapper"],["cdkDropList","",1,"main-wrap",3,"cdkDropListDropped","cdkDropListEntered","cdkDropListExited","cdkDropListData"],["cdkDrag","",1,"selected-cards-box",3,"cdkDragPreviewClass"],[1,"add-exercise-placeholder"],[1,"selected-card"],[1,"img-wrapper"],[1,"selected-exercise-img",3,"src","alt"],[1,"selected-exercise-name","mat-body-medium"],["mat-icon-button","",3,"click"],["class","exercise-card-placeholder",4,"cdkDragPlaceholder"],[1,"exercise-card-placeholder"],[1,"mat-body-large"],[1,"mat-headline-medium"],["aria-hidden","false","aria-label",e,"fontIcon","playlist_add",3,"inline"]];},template:function(t,i){if(t&1){let c=x();s(0,"div",2)(1,"div",3,0),u("cdkDropListDropped",function(a){return l(c),E(i.drop(a));})("cdkDropListEntered",function(a){return l(c),E(i.enteredSelected(a));})("cdkDropListExited",function(a){return l(c),E(i.exitedSelected(a));}),T(3,F,10,4,"div",4,b),m(5,z,5,1,"div",5),n()();}t&2&&(d(),_("cdkDropListData",i.selectedExercises()),d(2),h(i.selectedExercises()),d(2),v(i.selectedExercises().length===0&&!i.enteredSelectedList?5:-1));},dependencies:[A,O,$,V,w,R],styles:[".custom-preview[_ngcontent-%COMP%]{border-radius:16px}"]});}}return r;})();export{Z as SelectedExercisesListComponent};/**i18n:e33dda9241aa0d3f81605574177eca303a560132442e585b3107f4f1b4a47a86*/