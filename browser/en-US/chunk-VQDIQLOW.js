import{R as z,S as V,i as A,j as y,la as k,ma as F,q as R,s as I,t as N,u as $}from"./chunk-DIRLNK37.js";import"./chunk-JHAYPS3R.js";import{A as w,d as T}from"./chunk-ZS6ZT4HD.js";import"./chunk-RFLAKMDY.js";import"./chunk-L5235WWS.js";import"./chunk-F3LCRAVX.js";import"./chunk-4ZMGYCLE.js";import{Bb as d,Cb as p,Db as m,Hb as u,Lb as E,Pb as v,Qb as a,Ua as C,cb as D,hb as g,ib as M,la as i,ob as f,qb as P,sb as c,ta as h,u as S,ua as _,xb as O}from"./chunk-WWXBLJBF.js";var q=()=>[import("./chunk-2XJJEU2S.js").then(t=>t.ClientsProgressComponent),z],L=()=>[k],X=()=>[F];function j(t,s){if(t&1&&m(0,"ui-page-toolbar",2),t&2){let e=a();c("pageTitle",e.pageTitle());}}function U(t,s){if(t&1){let e=u();d(0,"div",5)(1,"h3",6),E(2,0),p(),d(3,"div",7)(4,"clients-progress",8),v("openEditClientProgramEvent",function(r){h(e);let o=a();return _(o.openEditClientProgram(r));}),p()()();}if(t&2){let e=a();C(3),c("options",e.themeSignal()),C(),c("programs$",e.clientsPrograms$)("isProgramCompleted",e.isProgramCompleted)("isDashboard",!0);}}function J(t,s){t&1&&m(0,"div",9);}function K(t,s){if(t&1){let e=u();d(0,"ui-favorite-programs",10),v("openEditProgramEvent",function(r){h(e);let o=a();return _(o.openEditProgram(r));})("reuseEditProgramEvent",function(r){h(e);let o=a();return _(o.reuseEditProgram(r));}),p();}if(t&2){let e=a();c("isAdmin",e.isAdmin())("themeSignal",e.themeSignal())("favoritePrograms",e.favoritePrograms());}}function Q(t,s){t&1&&m(0,"div",11);}function W(t,s){if(t&1&&m(0,"ui-favorite-exercises",12),t&2){let e=a();c("favoriteExercises",e.favoriteExercises())("themeSignal",e.themeSignal());}}function Y(t,s){t&1&&m(0,"div",11);}var de=(()=>{class t{constructor(){this.clientsService=i(A),this.router=i(T),this.shareClientsDataService=i(y),this.activePageTitle=i(I),this.screenSizeService=i(N),this.usersService=i(w),this.isProgramCompleted=[],this.clientInfo=this.shareClientsDataService.clientInfo,this.reuseProgram=this.shareClientsDataService.reuseProgram,this.isAdmin=this.usersService.isAdmin,this.favoritePrograms=this.usersService.favoritePrograms,this.favoriteExercises=this.usersService.favoriteExercises,this.pageTitle=this.activePageTitle.pageTitle,this.themeManager=i(R),this.themeSignal=this.themeManager.themeSignal,this.screenSize=this.screenSizeService.screenSize;}ngOnInit(){this.pageTitle.set("Dashboard"),this.clientsPrograms$=this.clientsService.getAllClientsProgramsBasic().pipe(S(e=>{let n=new Date(),r=[];return e.forEach(o=>{let l=o.program,b=new Date(l.dateRange.start),x=new Date(l.dateRange.end),B=x.getTime()-b.getTime(),G=n.getTime()-b.getTime(),H=Math.min(G/B*100,100);l.progress=Math.round(H),x>n&&(this.isProgramCompleted.push(!1),r.push(l),console.log("This program is in progress"));}),r.sort((o,l)=>new Date(l.dateRange.end).getTime()-new Date(o.dateRange.end).getTime()),console.log(r),r;}));}openEditClientProgram(e){console.log(e);let n=e.id,r=e.name,o=e.dateRange;console.log(o),this.clientInfo.set({clientId:e.clientId,clientName:e.clientName,programPosition:e.position,programId:n,programName:r,dateRange:o}),this.router.navigate([`programs/form/${n}`],{queryParams:{programName:`${r}`,isClientProgram:r.isTemplate?"false":"true"}});}openEditProgram(e){let n=e,r=e.id;this.clientInfo.set({clientId:"",clientName:"",programPosition:0,programId:"",programName:n.name,dateRange:{start:"",end:""}}),this.router.navigate([`programs/form/${r}`],{queryParams:{programName:`${n.name}`,isClientProgram:"false"}});}reuseEditProgram(e){this.reuseProgram.set(!0);let n=e;this.clientInfo.set({clientId:"",clientName:"",programPosition:0,programId:"",programName:n.name,dateRange:{start:"",end:""}}),console.log(this.clientInfo()),this.router.navigate([`programs/form/${n.id}`],{queryParams:{programName:`${n.name}`,isClientProgram:"false"}});}static{this.ɵfac=function(n){return new(n||t)();};}static{this.ɵcmp=D({type:t,selectors:[["sanareapp-dashboard"]],decls:15,vars:1,consts:()=>{let e;return e=" Recent progress ",[e,[500],[3,"pageTitle"],[1,"dashboard-container"],[1,"dashboard-fields"],[1,"client-progress-container"],[1,"mat-title-medium-margin-plus"],["overlay-scrollbars","",1,"scrollable-container",3,"options","defer"],[3,"openEditClientProgramEvent","programs$","isProgramCompleted","isDashboard"],[1,"programs-list-wrapper-placeholder"],[3,"openEditProgramEvent","reuseEditProgramEvent","isAdmin","themeSignal","favoritePrograms"],[1,"favorites-field-skeleton"],[3,"favoriteExercises","themeSignal"]];},template:function(n,r){if(n&1&&(g(0,j,1,1,"ui-page-toolbar",2),d(1,"div",3),g(2,U,5,4)(3,J,1,0),f(4,2,q,null,3,null,null,1,M),P(),d(6,"div",4),g(7,K,1,3)(8,Q,1,0),f(9,7,L,null,8),P(),g(11,W,1,2)(12,Y,1,0),f(13,11,X,null,12),P(),p()()),n&2){let o;O((o=r.screenSize())!=null&&o.isCompact?-1:0);}},dependencies:[$,V],styles:['[_nghost-%COMP%]{height:100%;width:100%}.dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.dashboard-container[_ngcontent-%COMP%]   .client-progress-container[_ngcontent-%COMP%]{flex:1 1 50%;display:block;height:calc(100vh - 170px);overflow:hidden;width:100%;min-width:0;padding:16px;border-radius:16px}.dashboard-container[_ngcontent-%COMP%]   .client-progress-container[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:calc(100vh - 238px);overflow-y:scroll}.dashboard-container[_ngcontent-%COMP%]   .programs-list-wrapper-placeholder[_ngcontent-%COMP%]{position:relative;overflow:hidden;width:100%;min-width:0;flex:1 1 50%;border-radius:16px}.dashboard-container[_ngcontent-%COMP%]   .programs-list-wrapper-placeholder[_ngcontent-%COMP%]:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 1s infinite;content:""}.dashboard-container[_ngcontent-%COMP%]   .dashboard-fields[_ngcontent-%COMP%]{width:100%;min-width:0;flex:1 1 50%;display:flex;flex-direction:column;gap:16px;height:calc(100vh - 170px);border-radius:16px}.dashboard-container[_ngcontent-%COMP%]   .dashboard-fields[_ngcontent-%COMP%]   ui-favorite-programs[_ngcontent-%COMP%]{flex:1;min-height:0}.dashboard-container[_ngcontent-%COMP%]   .dashboard-fields[_ngcontent-%COMP%]   ui-favorite-exercises[_ngcontent-%COMP%]{flex:1;min-height:0}.dashboard-container[_ngcontent-%COMP%]   .dashboard-fields[_ngcontent-%COMP%]   .favorites-field-skeleton[_ngcontent-%COMP%]{flex:1;border-radius:16px;overflow:hidden;position:relative}.dashboard-container[_ngcontent-%COMP%]   .dashboard-fields[_ngcontent-%COMP%]   .favorites-field-skeleton[_ngcontent-%COMP%]:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 1s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 599px){.dashboard-container[_ngcontent-%COMP%]{flex-direction:column;height:calc(100vh - 80px);display:block}.dashboard-container[_ngcontent-%COMP%]   .client-progress-container[_ngcontent-%COMP%]{height:fit-content;width:100%;border-radius:0;padding:8px;margin-bottom:16px}.dashboard-container[_ngcontent-%COMP%]   .client-progress-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:16px 16px 0}.dashboard-container[_ngcontent-%COMP%]   .client-progress-container[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:fit-content;overflow-y:visible}.dashboard-container[_ngcontent-%COMP%]   .dashboard-fields[_ngcontent-%COMP%]{height:400px}}']});}}return t;})();export{de as DashboardComponent};/**i18n:f7ebf515f5e1384586f9e8a2dce9cab33ab19fa51cccdd4274fc3532fc3bb728*/