import{U as ne,V as oe,h as U,j as J,k as K,m as Q,n as Y,p as Z,q as ee,r as te}from"./chunk-BIDVYBOA.js";import{C as q,d as $,o as X,v as k,z}from"./chunk-LWSDBKQH.js";import"./chunk-MM5BXHTK.js";import{a as _e}from"./chunk-L3ULN5IO.js";import"./chunk-AGLUW5KV.js";import{h as V}from"./chunk-DLSMW3HH.js";import{a as j}from"./chunk-JJKWM2VU.js";import{C as x,D as F,E as G,j as v,l as E,o as R,p as w,u as H,x as W,z as y}from"./chunk-QERZJV4N.js";import{Bb as h,Ib as P,Ic as b,Jc as B,Kb as A,Mb as M,Vb as l,Wb as o,Xb as s,dc as m,e as T,hc as N,ic as D,kb as C,ma as a,p as u,tc as L,vc as f,wb as I}from"./chunk-ULCUQGV7.js";var le=()=>[import("./chunk-CBNJACN6.js").then(i=>i.ClientsProgressComponent),import("./chunk-CDROPXGJ.js").then(i=>i.AsyncPipe)];function ae(i,ie){if(i&1&&(s(0,"clients-progress",21),b(1,"async")),i&2){let n=D();M("programs",B(1,3,n.programs$))("isProgramCompleted",n.isProgramCompleted)("isDashboard",!1);}}function re(i,ie){i&1&&(l(0,"div",22),s(1,"div",23)(2,"div",23)(3,"div",23)(4,"div",23)(5,"div",23),o());}var he=(()=>{class i{constructor(){this.dialogRef=a(Q),this.data=a(Y),this.formBuilder=a(x),this.clientsService=a(J),this.programsService=a(U),this.router=a($),this._snackBar=a(q),this.shareClientsDataService=a(K),this.programs=[],this.subscriptions=new T(),this.fullEditButtonString="Full edit",this.date=new Date(),this.isProgramCompleted=[],this.clientInfo=this.shareClientsDataService.clientInfo,this.themeManager=a(te),this.themeSignal=this.themeManager.themeSignal;}ngOnInit(){this._initForm();let n=this.clientsService.getClient(this.data.clientId).subscribe(e=>{this.clientForm.firstName.setValue(e.firstName),this.clientForm.lastName.setValue(e.lastName),this.clientForm.email.setValue(e.email),this.clientForm.phone.setValue(e.phone),this.programs=e.programs,this.programs$=u(this.programs),console.log(this.programs);let t=new Date();this.programs?.forEach(r=>{let d=r,c=new Date(d.dateRange.start),p=new Date(d.dateRange.end),g=p.getTime()-c.getTime(),S=t.getTime()-c.getTime(),O=Math.min(S/g*100,100);d.progress=O,p<t?(this.isProgramCompleted.push(!0),console.log("This program is completed")):(this.isProgramCompleted.push(!1),console.log("This program is in progress"));});});this.subscriptions.add(n);}_initForm(){this.form=this.formBuilder.group({firstName:["",E.required],lastName:["",E.required],name:[""],email:[""],phone:["",E.required]});}get clientForm(){return this.form.controls;}_updateClient(n,e){let t=this.clientsService.updateClient(n,e).subscribe(r=>{this._snackBar.open("Client updated","",{duration:2e3,panelClass:["custom-snackbar-style"]}),console.log(r);});this.subscriptions.add(t);}fullEditMode(n,e){console.log(e),this.clientInfo.set({clientId:n,clientName:e,programPosition:0,programId:"",programName:"",dateRange:{start:"",end:""}}),this.router.navigateByUrl(`clients/form/${n}`),this.dialogRef.close(!0),console.log(n);}onConfirm(){let n={firstName:this.clientForm.firstName.value,lastName:this.clientForm.lastName.value,name:this.clientForm.name.value,email:this.clientForm.email.value,phone:this.clientForm.phone.value};this._updateClient(n,this.data.clientId),this.dialogRef.close(!0);}deleteClientProgram(){console.log("delete client program");}onClose(){this.dialogRef.close();}ngOnDestroy(){this.subscriptions.unsubscribe();}static{this.ɵfac=function(e){return new(e||i)();};}static{this.ɵcmp=I({type:i,selectors:[["clients-show-client-modal"]],decls:36,vars:5,consts:()=>{let n;n="Enter clients firstname";let e;e="Enter clients lastname";let t;t="Enter clients email";let r;r="Enter clients phone number";let d;d="Firstname";let c;c="Lastname";let p;p="Email";let g;g="Phone";let S;S=" Cancel ";let O;return O=" Save ",[d,c,p,g,S,O,[1,"confirmation-dialog-wrapper"],[1,"header-container"],["mat-dialog-title","",1,"dialog-title","mat-title-large"],["overlay-scrollbars","",1,"dialog-content-wrapper",3,"options","defer"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","firstName","type","text","placeholder",n],["matInput","","formControlName","lastName","type","text","placeholder",e],["matInput","","formControlName","email","type","text","placeholder",t],["matInput","","formControlName","phone","type","text","placeholder",r],["mat-dialog-actions","",1,"dialog-actions"],["mat-flat-button","","color","primary",1,"custom-btn",3,"click"],[1,"actions-wrapper"],["mat-button","","cdkFocusInitial","",1,"dialog-buttons",3,"click"],["mat-button","",1,"dialog-buttons",3,"click","disabled"],[3,"programs","isProgramCompleted","isDashboard"],[1,"programs-list-wrapper-placeholder"],[1,"program-list-skeleton"]];},template:function(e,t){e&1&&(l(0,"div",6)(1,"div",7)(2,"h2",8),L(3),o()(),l(4,"div",9)(5,"form",10)(6,"mat-form-field",11)(7,"mat-label"),m(8,0),o(),s(9,"input",12),o(),l(10,"mat-form-field",11)(11,"mat-label"),m(12,1),o(),s(13,"input",13),o(),l(14,"mat-form-field",11)(15,"mat-label"),m(16,2),o(),s(17,"input",14),o(),l(18,"mat-form-field",11)(19,"mat-label"),m(20,3),o(),s(21,"input",15),o(),h(22,ae,2,5)(23,re,6,0),P(24,22,le,null,23),A(),o()(),l(26,"div",16)(27,"button",17),N("click",function(){return t.fullEditMode(t.data.clientId,t.data.clientName);}),l(28,"mat-icon"),L(29,"edit"),o(),L(30),o(),l(31,"div",18)(32,"button",19),N("click",function(){return t.onClose();}),m(33,4),o(),l(34,"button",20),N("click",function(){return t.onConfirm();}),m(35,5),o()()()()),e&2&&(C(3),f(" ",t.data.title," "),C(),M("options",t.themeSignal()),C(),M("formGroup",t.form),C(25),f(" ",t.fullEditButtonString," "),C(4),M("disabled",t.form.invalid));},dependencies:[Z,oe,ne,F,H,v,R,w,G,W,y,k,X,z,ee,V,j],styles:['.confirmation-dialog-wrapper[_ngcontent-%COMP%]{height:737px}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .dialog-title[_ngcontent-%COMP%]{margin:0}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .dialog-icon[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .dialog-content-wrapper[_ngcontent-%COMP%]   .full-edit-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .dialog-content-wrapper[_ngcontent-%COMP%]   .full-edit-wrapper[_ngcontent-%COMP%]   .clients-progress-item[_ngcontent-%COMP%]{flex:1}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{padding-bottom:20px;padding-right:20px;text-align:right;display:flex;flex-direction:column;gap:16px}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .custom-btn[_ngcontent-%COMP%]{margin-top:24px;width:fit-content;align-self:flex-start}.confirmation-dialog-wrapper[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   .actions-wrapper[_ngcontent-%COMP%]{align-self:flex-end}.programs-list-wrapper-placeholder[_ngcontent-%COMP%]{height:162px;overflow-y:hidden}.programs-list-wrapper-placeholder[_ngcontent-%COMP%]   .program-list-skeleton[_ngcontent-%COMP%]{width:100%;height:64px;overflow:hidden;position:relative;margin-bottom:4px;border-radius:8px}.programs-list-wrapper-placeholder[_ngcontent-%COMP%]   .program-list-skeleton[_ngcontent-%COMP%]:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 1s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}']});}}return i;})();export{_e as ClientsProgressComponent,he as ShowClientModalComponent};/**i18n:e33dda9241aa0d3f81605574177eca303a560132442e585b3107f4f1b4a47a86*/