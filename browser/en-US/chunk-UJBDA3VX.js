import{Ba as me,Ea as pe,Ga as ue,Ha as xe,U as de,V as Ee,b as se,ca as le,d as I,da as Ce,e as M,l as ae,o as _e,r as ce,ta as Se}from"./chunk-JJTP4YZ6.js";import{B as T,j as ie}from"./chunk-PFR6PFSF.js";import"./chunk-AGQBY5K2.js";import"./chunk-UWLOHD45.js";import{f as te,j as re}from"./chunk-HCHHWL7J.js";import{a as oe,c as ne}from"./chunk-M5WVG3AD.js";import"./chunk-LVLGNVF2.js";import{$ as k,$b as u,Ac as q,B as y,Bb as m,Ia as f,Ib as V,Ic as J,Jc as K,Kb as z,L as O,Mb as p,Rb as A,Tb as H,Ub as W,Vb as o,Wb as c,Xb as P,Xd as Q,a as F,b as w,dc as B,e as g,ge as Y,hc as C,ic as s,ie as Z,kb as d,ma as l,sc as G,tc as x,u as $,uc as U,va as a,vc as j,wa as _,wb as h,xe as ee}from"./chunk-HUEGCCE2.js";function ve(r,E){if(r&1){let e=u();o(0,"button",14),C("click",function(){a(e);let i=s(2);return _(i.removeFromFavorites(i.exercise));}),o(1,"mat-icon"),x(2,"star"),c()();}}function Pe(r,E){if(r&1){let e=u();o(0,"button",15),C("click",function(){a(e);let i=s(2);return _(i.addToFavorites(i.exercise));}),o(1,"mat-icon"),x(2,"star_border"),c()();}}function fe(r,E){if(r&1){let e=u();o(0,"button",16),C("click",function(){a(e);let i=s(2);return _(i.removeFromSelected(i.exercise));})("mouseenter",function(){a(e);let i=s(2);return _(i.showHoverIcon(!0));})("mouseleave",function(){a(e);let i=s(2);return _(i.showHoverIcon(!1));}),o(1,"mat-icon"),x(2),c()();}if(r&2){let e=s(2);p("color",e.isHovered?"accent":"primary"),d(2),U(e.isHovered?"close":"done");}}function Re(r,E){if(r&1){let e=u();o(0,"button",17),C("click",function(){a(e);let i=s(2);return _(i.addToSelected(i.exercise));}),o(1,"mat-icon"),x(2,"add"),c()();}}function ge(r,E){if(r&1){let e=u();o(0,"div",2)(1,"div",3),C("mouseenter",function(){a(e);let i=G(3);return _(i.onMouseEnter());})("mouseleave",function(){a(e);let i=G(3);return _(i.onMouseLeave());}),P(2,"ui-video-player",4,0),c(),o(4,"div",5)(5,"div",6)(6,"span",7),x(7),c()(),o(8,"div",8),m(9,ve,3,0,"button",9)(10,Pe,3,0,"button",10),o(11,"button",11),C("click",function(){a(e);let i=s();return _(i.showExerciseModal(i.exercise.id,i.exercise,!1));}),o(12,"mat-icon"),x(13,"info_outline"),c()(),m(14,fe,3,2,"button",12)(15,Re,3,0,"button",13),c()()();}if(r&2){let e=s();d(2),p("videoSrc",e.exercise.video)("thumbnail",e.exercise.images==null?null:e.exercise.images.mainImg)("isModal",!1),d(5),j(" ",e.exercise.name[e.selectedLanguage]," "),d(2),A(e.exercise.isFavorite?9:10),d(5),A(e.exercise.isSelected?14:15);}}var L=(()=>{class r{constructor(){this.dialog=l(_e),this.exercisesService=l(se),this.shareStateService=l(I),this.selectedExercisesService=l(M),this.usersService=l(T),this.localstorageService=l(ie),this.subscriptions=new g(),this.isEmptyPlaceholder=!1,this.selectedExercise=f(),this.removeExercise=f(),this.favoriteExercise=f(),this.removeFavoriteExercise=f(),this.isHovered=!1,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId;}ngOnInit(){this.selectedLanguage=this._getUserLanguageToken();}addToSelected(e){this.selectedExercisesService.addToSelected(e);}removeFromSelected(e){this.selectedExercisesService.removeFromSelected(e);}selectExercise(e){e.isSelected=!0,this.selectedExercise.emit(e);}removeCard(e){this.removeExercise.emit(e);}showHoverIcon(e){this.isHovered=e;}_getExercise(e){return this.exercisesService.getExercise(e);}showExerciseModal(e,t,i){let n=this._getExercise(e).subscribe(v=>{this.dialog.open(me,{data:{fullExercise:v,exerciseCard:t,isProgramExercise:i,selectedLang:this.selectedLanguage},width:"500px",panelClass:["custom-dialog",i?"custom-shadow":""],backdropClass:i?"custom-backdrop":""});});this.subscriptions.add(n);}addToFavorites(e){e.isFavorite=!0,this.favoriteExercise.emit(e);}removeFromFavorites(e){e.isFavorite=!1,this.removeFavoriteExercise.emit(e);}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")?.split("-")[0];}ngOnDestroy(){this.subscriptions.unsubscribe();}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=h({type:r,selectors:[["sanareapp-exercise-card"]],inputs:{exercise:"exercise",cardWrapper:"cardWrapper",isEmptyPlaceholder:"isEmptyPlaceholder"},outputs:{selectedExercise:"selectedExercise",removeExercise:"removeExercise",favoriteExercise:"favoriteExercise",removeFavoriteExercise:"removeFavoriteExercise"},decls:2,vars:2,consts:()=>{let e;e="Remove from favorites";let t;t="Favorite icon-button with a star icon";let i;i="Add to favorites";let n;n="Favorite icon-button with a star icon";let v;v="Details";let R;R="Info icon-button with a info icon";let D;D="Remove exercise";let N;N="Remove icon-button with a close icon";let X;X="Add exercise";let b;return b="Add icon button with a add icon",[["videoPlayer",""],[3,"ngClass"],[1,"card"],[1,"card-head",3,"mouseenter","mouseleave"],[3,"videoSrc","thumbnail","isModal"],[1,"card-body"],[1,"exercise-name"],[1,"multi-line-text"],[1,"card-icons"],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star"],["mat-icon-button","","matTooltip",i,"aria-label",n],["mat-icon-button","","matTooltip",v,"aria-label",R,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",N,1,"toggleDoneRemoveBtn",3,"color"],["mat-icon-button","","matTooltip",X,"color","primary","aria-label",b],["mat-icon-button","","matTooltip",e,"aria-label",t,1,"favorite-exercise-star",3,"click"],["mat-icon-button","","matTooltip",i,"aria-label",n,3,"click"],["mat-mini-fab","","matTooltip",D,"aria-label",N,1,"toggleDoneRemoveBtn",3,"click","mouseenter","mouseleave","color"],["mat-icon-button","","matTooltip",X,"color","primary","aria-label",b,3,"click"]];},template:function(t,i){t&1&&(o(0,"div",1),m(1,ge,16,6,"div",2),c()),t&2&&(p("ngClass",i.cardWrapper),d(),A(i.isEmptyPlaceholder?-1:1));},dependencies:[Q,te,ne,oe,re,Se],styles:["[_nghost-%COMP%]{border-radius:16px}"]});}}return r;})();var he=()=>[pe,xe,L],Te=(r,E)=>E.id;function Ie(r,E){r&1&&(o(0,"div",2)(1,"span"),B(2,0),c()());}function Me(r,E){r&1&&(o(0,"div",3),P(1,"mat-spinner",5),c());}function De(r,E){r&1&&P(0,"div",9);}function Ne(r,E){if(r&1){let e=u();o(0,"sanareapp-exercise-card",7),C("removeExercise",function(i){a(e);let n=s(2);return _(n.removeCard(i));})("favoriteExercise",function(i){a(e);let n=s(2);return _(n.addToFavorites(i));})("removeFavoriteExercise",function(i){a(e);let n=s(2);return _(n.removeFromFavorites(i));})("cdkDragStarted",function(){a(e);let i=s(2);return _(i.onDragStarted());})("cdkDragEnded",function(){a(e);let i=s(2);return _(i.onDragEnded());}),m(1,De,1,0,"div",8),c();}if(r&2){let e=s().$implicit;p("isEmptyPlaceholder",!1)("exercise",e)("cdkDragData",e);}}function Xe(r,E){r&1&&P(0,"div",10);}function be(r,E){if(r&1&&(o(0,"div",6)(1,"sanareapp-exercise-card",11),x(2," >"),c()()),r&2){let e=s().$implicit;d(),p("exercise",e);}}function Fe(r,E){if(r&1&&(m(0,Ne,2,3)(1,Xe,1,0),V(2,0,he,null,1),z(),m(4,be,3,1,"div",6)),r&2){let e=E.$implicit,t=s();d(4),A(t.transferringItem()===e?4:-1);}}var Ei=(()=>{class r{constructor(){this.themeManager=l(ce),this.shareStateService=l(I),this.selectedExercisesService=l(M),this.usersService=l(T),this.transferringItemService=l(ae),this.isFetchingData=this.shareStateService.isFetchingData,this.transferringItem=this.transferringItemService.transferringItem,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId,this.selectedExercises=this.selectedExercisesService.selectedExercises,this.themeSignal=this.themeManager.themeSignal,this.subscriptions=new g(),this.isDragging=!1;}ngOnInit(){this.windowSize$=y(window,"resize").pipe(k(null),O(200),$(()=>window.innerWidth));}getGridStyle(e){let t=e??0;return this.drawerOpen=this.shareStateService.drawerSignal(),t<1510&&t>1338&&this.drawerOpen?{"grid-template-columns":"repeat(3, 1fr)"}:t<1338&&t>1168&&this.drawerOpen?{"grid-template-columns":"repeat(2, 1fr)"}:{};}entered(){this.transferringItem.set(void 0);}exited(e){this.transferringItem.set(e.item.data),console.log(this.transferringItem());}noReturnPredicate(){return!1;}removeCard(e){let t;this.selectedExercises().some((i,n)=>{i.id===e.id&&(t=n);}),this._resetCardState(e,t);}addToFavorites(e){this.userFavorites.update(t=>{let i=w(F({},t),{favExercises:[...t.favExercises,e.id]});return this._updateFavorites(this.userId(),i),i;});}removeFromFavorites(e){let t=this.userFavorites().favExercises.filter(i=>i!==e.id);this.userFavorites.update(i=>w(F({},i),{favExercises:[...t]})),this._updateFavorites(this.userId(),this.userFavorites());}_updateFavorites(e,t){let i=this.usersService.updateFavorites(e,t).subscribe(n=>console.log(n));this.subscriptions.add(i);}_resetCardState(e,t){this.exercises.length!==0&&this.exercises.find(i=>{i.id===e.id&&(i.isSelected=!1);});}onDragStarted(){this.isDragging=!0;}onDragEnded(){this.isDragging=!1;}static{this.ɵfac=function(t){return new(t||r)();};}static{this.ɵcmp=h({type:r,selectors:[["sanareapp-exercises-grid"]],inputs:{exercises:"exercises"},decls:8,vars:8,consts:()=>{let e;return e="No exercises found for your search",[e,["overlay-scrollbars","",1,"grid-container",3,"options","defer"],[1,"noExercisesFound"],[1,"fetchingDataSpinner"],["cdkDropList","","cdkDropListSortingDisabled","",1,"exercise-cards",3,"cdkDropListEntered","cdkDropListExited","cdkDropListData","ngStyle","cdkDropListEnterPredicate"],["diameter","50"],[1,"static-placeholder"],["cardWrapper","wrap-default","cdkDrag","",3,"removeExercise","favoriteExercise","removeFavoriteExercise","cdkDragStarted","cdkDragEnded","isEmptyPlaceholder","exercise","cdkDragData"],["class","exercise-card-placeholder",4,"cdkDragPlaceholder"],[1,"exercise-card-placeholder"],[1,"exercise-card-skeleton"],["cardWrapper","wrap-default",3,"exercise"]];},template:function(t,i){if(t&1){let n=u();q(0),o(1,"div",1),m(2,Ie,3,0,"div",2)(3,Me,2,0,"div",3),o(4,"div",4),J(5,"async"),C("cdkDropListEntered",function(){return a(n),_(i.entered());})("cdkDropListExited",function(R){return a(n),_(i.exited(R));}),H(6,Fe,5,1,null,null,Te),c()();}if(t&2){let n=i.isFetchingData();d(),p("options",i.themeSignal()),d(),A((i.exercises==null?null:i.exercises.length)===0?2:-1),d(),A(n?3:-1),d(),p("cdkDropListData",i.exercises)("ngStyle",i.getGridStyle(K(5,6,i.windowSize$)))("cdkDropListEnterPredicate",i.noReturnPredicate),d(2),W(i.exercises);}},dependencies:[ee,Y,Z,ue,Ee,de,L,Ce,le],styles:[".noExercisesFound[_ngcontent-%COMP%]{text-align:center;margin:32px 0}"]});}}return r;})();export{Ei as ExercisesGridComponent};/**i18n:ab11a1dcb816b11965daf92ebc4252f70aaa11f3a07066be31c4bdd61d35557d*/