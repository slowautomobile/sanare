"use strict";(self.webpackChunksanare_app=self.webpackChunksanare_app||[]).push([[52],{6052:(V,T,l)=>{l.r(T),l.d(T,{ClientsListComponent:()=>k});var t=l(8559),I=l(7941),S=l(2243),M=l(3347),c=l(2047),s=l(906),L=l(7660),f=l(4683),h=l(9277),R=l(7092),b=l(2572),P=l(6694),O=l(3840),D=l(640),$=l(4175),d=l(1819),G=l(5541),u=l(4950);const v=()=>[5,10,25,100];function B(e,a){1&e&&(t.j41(0,"th",23),t.pXf(1,2),t.k0s())}function y(e,a){if(1&e&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.JRh(n.name)}}function X(e,a){1&e&&(t.j41(0,"th",23),t.pXf(1,3),t.k0s())}function F(e,a){if(1&e&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.JRh(n.email)}}function w(e,a){1&e&&(t.j41(0,"th",23),t.pXf(1,4),t.k0s())}function j(e,a){if(1&e&&(t.j41(0,"td",24),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.R7$(),t.JRh(n.phone)}}function U(e,a){1&e&&t.nrm(0,"th",25)}function W(e,a){if(1&e){const n=t.RV6();t.j41(0,"td",24)(1,"div",26)(2,"button",27),t.bIt("click",function(){const _=t.eBV(n).$implicit,o=t.XpG();return t.Njj(o.openEditClientDialog(_.id,_.name))}),t.j41(3,"mat-icon"),t.EFF(4,"edit"),t.k0s()(),t.j41(5,"button",28),t.bIt("click",function(){const _=t.eBV(n).$implicit,o=t.XpG();return t.Njj(o.openDeleteConfirmationDialog(_.id))}),t.j41(6,"mat-icon"),t.EFF(7,"delete_outline"),t.k0s()()()()}}function x(e,a){1&e&&t.nrm(0,"tr",29)}function z(e,a){1&e&&t.nrm(0,"tr",30)}function K(e,a){if(1&e&&(t.j41(0,"tr",31)(1,"td",32),t.pXf(2,5),t.k0s()()),2&e){t.XpG();const n=t.sdS(6);t.R7$(2),t.uP7(n.value),t.nnv(2)}}let k=(()=>{class e{constructor(){this.pageTitle="Clients",this.pageType="client",this.clientsService=(0,t.WQX)(L._$),this._snackBar=(0,t.WQX)(M.UG),this.dialog=(0,t.WQX)(I.bZ),this.router=(0,t.WQX)(b.Ix),this.displayedColumns=["name","email","phone","options"],this.dataSource=new s.I6,this.clients=[],this.subscriptions=new R.yU,this.shareClientsDataService=(0,t.WQX)(L.Xg),this.clientInfo=this.shareClientsDataService.clientInfo,this.themeManager=(0,t.WQX)(P.YP),this.themeSignal=this.themeManager.themeSignal,this.getClients()}ngOnInit(){this.clientInfo.set({clientId:"",clientName:"",programPosition:0,programId:"",programName:"",dateRange:{start:"",end:""}}),this.clientsService.getClients().subscribe(n=>console.log(n))}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}createClient(){this.router.navigateByUrl("/clients/form")}getClients(){const n=this.clientsService.getClientsBasic().subscribe(i=>{this.clients=i,this.dataSource.data=this.clients,console.log(this.dataSource.data)});this.subscriptions.add(n)}applyFilter(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openEditClientDialog(n,i){const o=this.dialog.open(h.N,{width:"500px",data:{title:"Edit client",clientId:n,clientName:i},panelClass:["custom-dialog","custom-client-dialog-content-wrapper"]}).afterClosed().subscribe(r=>{r?this.getClients():console.log("Client modal exited")});this.subscriptions.add(o)}openDeleteConfirmationDialog(n){const i=this.dialog.open(f.i,{width:"312px",data:{title:"Delete selected client?",message:"Deleting the selected client will remove it from your account."},panelClass:"custom-dialog"}),_=i.afterClosed().subscribe(o=>{o?(console.log("User confirmed deletion"),this.deleteClient(n),i.close()):(console.log("User canceled deletion"),i.close())});this.subscriptions.add(_)}deleteClient(n){const i=this.clientsService.deleteClient(n).subscribe({next:()=>{this.getClients(),this._snackBar.open("Client deleted","",{duration:2e3,panelClass:["custom-snackbar-style"]})},error:_=>console.error(_),complete:()=>console.info("Client deletion completed")});this.subscriptions.add(i)}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["sanareapp-clients-list"]],viewQuery:function(i,_){if(1&i&&(t.GBs(c.B4,5),t.GBs(S.iy,5)),2&i){let o;t.mGM(o=t.lsd())&&(_.sort=o.first),t.mGM(o=t.lsd())&&(_.paginator=o.first)}},standalone:!0,features:[t.Jv_([{provide:S.xX,useClass:P.Tu}]),t.aNF],decls:26,vars:9,consts:()=>{let n,i,_,o,r,E,m,A,N,g,p;return n="E.g. John Maurice",i="Select page of clients",_="Filter",o=" Name ",r=" Email ",E=" Phone ",m="Edit",A="Edit icon button",N="Delete",g="Delete icon button",p=" No data matching the filter \"" + "\ufffd0\ufffd" + "\" ",[["input",""],_,o,r,E,p,[3,"newEvent","pageTitle","pageType","newButton"],[1,"table-wrapper"],["matInput","","placeholder",n,3,"keyup"],[1,"clients-table-container"],["overlay-scrollbars","",1,"clients-list-table","table-scroll-container",3,"options","defer"],["mat-table","","matSort","",1,"mat-table-background",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","phone"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","table-rows",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["pageSize","10","aria-label",i,1,"mat-paginator-background",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"client-options"],["mat-icon-button","","matTooltip",m,"aria-label",A,3,"click"],["mat-icon-button","","matTooltip",N,"aria-label",g,3,"click"],["mat-header-row",""],["mat-row","",1,"table-rows"],[1,"mat-row"],["colspan","4",1,"mat-cell"]]},template:function(i,_){if(1&i){const o=t.RV6();t.j41(0,"ui-page-toolbar",6),t.bIt("newEvent",function(){return t.eBV(o),t.Njj(_.createClient())}),t.k0s(),t.j41(1,"div",7)(2,"mat-form-field")(3,"mat-label"),t.pXf(4,1),t.k0s(),t.j41(5,"input",8,0),t.bIt("keyup",function(E){return t.eBV(o),t.Njj(_.applyFilter(E))}),t.k0s()(),t.j41(7,"div",9)(8,"div",10)(9,"table",11),t.qex(10,12),t.DNE(11,B,2,0,"th",13)(12,y,2,1,"td",14),t.bVm(),t.qex(13,15),t.DNE(14,X,2,0,"th",13)(15,F,2,1,"td",14),t.bVm(),t.qex(16,16),t.DNE(17,w,2,0,"th",13)(18,j,2,1,"td",14),t.bVm(),t.qex(19,17),t.DNE(20,U,1,0,"th",18)(21,W,8,0,"td",14),t.bVm(),t.DNE(22,x,1,0,"tr",19)(23,z,1,0,"tr",20)(24,K,3,1,"tr",21),t.k0s()(),t.nrm(25,"mat-paginator",22),t.k0s()()}2&i&&(t.Y8G("pageTitle",_.pageTitle)("pageType",_.pageType)("newButton",!0),t.R7$(8),t.Y8G("options",_.themeSignal()),t.R7$(),t.Y8G("dataSource",_.dataSource),t.R7$(13),t.Y8G("matHeaderRowDef",_.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",_.displayedColumns),t.R7$(2),t.Y8G("pageSizeOptions",t.lJ4(8,v)))},dependencies:[P.YL,u.rl,u.nJ,G.fg,d.QX,d.r2,s.Zl,c.B4,s.cC,s.tL,s.KS,c.aE,s.YV,s.$R,$.iY,D.oV,O.An,s.ji,s.YZ,s.iL,s.NB,s.ky,S.Ou,S.iy],styles:[".table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 234px);overflow-y:hidden}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]{height:calc(100vh - 290px);overflow-y:scroll}.table-wrapper[_ngcontent-%COMP%]   .clients-table-container[_ngcontent-%COMP%]   .table-scroll-container[_ngcontent-%COMP%]   .table-rows[_ngcontent-%COMP%]{height:48px!important}"]})}}return e})()}}]);
//# sourceMappingURL=52.ef552c84c523c082.js.map