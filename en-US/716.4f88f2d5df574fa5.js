"use strict";(self.webpackChunksanare_app=self.webpackChunksanare_app||[]).push([[716],{4716:(H,x,o)=>{o.r(x),o.d(x,{ExercisesGridComponent:()=>Y});var e=o(8559),d=o(316),l=o(6571),A=o(1819),_=o(7660),h=o(7941),C=o(6100),T=o(3840),I=o(640),R=o(4175),v=o(7092);function X(s,a){if(1&s){const i=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.removeFromFavorites(r.exercise))}),e.j41(1,"mat-icon"),e.EFF(2,"star"),e.k0s()()}}function N(s,a){if(1&s){const i=e.RV6();e.j41(0,"button",15),e.bIt("click",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.addToFavorites(r.exercise))}),e.j41(1,"mat-icon"),e.EFF(2,"star_border"),e.k0s()()}}function D(s,a){if(1&s){const i=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.removeFromSelected(r.exercise))})("mouseenter",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.showHoverIcon(!0))})("mouseleave",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.showHoverIcon(!1))}),e.j41(1,"mat-icon"),e.EFF(2),e.k0s()()}if(2&s){const i=e.XpG(2);e.Y8G("color",i.isHovered?"accent":"primary"),e.R7$(2),e.JRh(i.isHovered?"close":"done")}}function F(s,a){if(1&s){const i=e.RV6();e.j41(0,"button",17),e.bIt("click",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.addToSelected(r.exercise))}),e.j41(1,"mat-icon"),e.EFF(2,"add"),e.k0s()()}}function G(s,a){if(1&s){const i=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"img",4),e.k0s()(),e.j41(4,"div",5)(5,"div",6)(6,"span",7),e.EFF(7),e.k0s()(),e.j41(8,"div",8),e.DNE(9,X,3,0,"button",9)(10,N,3,0,"button",10),e.j41(11,"button",11),e.bIt("click",function(){e.eBV(i);const r=e.XpG();return e.Njj(r.showExerciseModal(r.exercise.id,r.exercise,!1))}),e.j41(12,"mat-icon"),e.EFF(13,"info_outline"),e.k0s()(),e.DNE(14,D,3,2,"button",12)(15,F,3,0,"button",13),e.k0s()()()}if(2&s){const i=e.XpG();e.R7$(3),e.Y8G("src",null==i.exercise.images?null:i.exercise.images.mainImg,e.B4B)("alt",i.exercise.name[i.selectedLanguage]),e.R7$(4),e.SpI(" ",i.exercise.name[i.selectedLanguage]," "),e.R7$(2),e.vxM(i.exercise.isFavorite?9:10),e.R7$(5),e.vxM(i.exercise.isSelected?14:15)}}let P=(()=>{class s{constructor(){this.dialog=(0,e.WQX)(h.bZ),this.exercisesService=(0,e.WQX)(_.bq),this.shareStateService=(0,e.WQX)(_.kN),this.selectedExercisesService=(0,e.WQX)(_.yr),this.usersService=(0,e.WQX)(C.gs),this.localstorageService=(0,e.WQX)(C.ms),this.subscriptions=new v.yU,this.isEmptyPlaceholder=!1,this.selectedExercise=new e.bkB,this.removeExercise=new e.bkB,this.favoriteExercise=new e.bkB,this.removeFavoriteExercise=new e.bkB,this.isHovered=!1,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId}ngOnInit(){this.selectedLanguage=this._getUserLanguageToken()}addToSelected(i){this.selectedExercisesService.addToSelected(i)}removeFromSelected(i){this.selectedExercisesService.removeFromSelected(i)}selectExercise(i){i.isSelected=!0,this.selectedExercise.emit(i)}removeCard(i){this.removeExercise.emit(i)}showHoverIcon(i){this.isHovered=i}_getExercise(i){return this.exercisesService.getExercise(i)}showExerciseModal(i,t,r){const n=this._getExercise(i).subscribe(E=>{this.dialog.open(_.ZT,{data:{fullExercise:E,exerciseCard:t,isProgramExercise:r,selectedLang:this.selectedLanguage},width:"500px",panelClass:["custom-dialog",r?"custom-shadow":""],backdropClass:r?"custom-backdrop":""})});this.subscriptions.add(n)}addToFavorites(i){i.isFavorite=!0,this.favoriteExercise.emit(i)}removeFromFavorites(i){i.isFavorite=!1,this.removeFavoriteExercise.emit(i)}_getUserLanguageToken(){return this.localstorageService.getToken("userLanguage")?.split("-")[0]}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["sanareapp-exercise-card"]],inputs:{exercise:"exercise",cardWrapper:"cardWrapper",isEmptyPlaceholder:"isEmptyPlaceholder"},outputs:{selectedExercise:"selectedExercise",removeExercise:"removeExercise",favoriteExercise:"favoriteExercise",removeFavoriteExercise:"removeFavoriteExercise"},standalone:!0,features:[e.aNF],decls:2,vars:2,consts:()=>{let i,t,r,n,E,f,S,p,u,m;return i="Remove from favorites",t="Favorite icon-button with a star icon",r="Add to favorites",n="Favorite icon-button with a star icon",E="Details",f="Info icon-button with a info icon",S="Remove exercise",p="Remove icon-button with a close icon",u="Add exercise",m="Add icon button with a add icon",[[3,"ngClass"],[1,"card"],[1,"card-head"],[1,"img-wrapper"],[1,"exercise-img",3,"src","alt"],[1,"card-body"],[1,"exercise-name"],[1,"multi-line-text"],[1,"card-icons"],["mat-icon-button","","matTooltip",i,"aria-label",t,1,"favorite-exercise-star"],["mat-icon-button","","matTooltip",r,"aria-label",n],["mat-icon-button","","matTooltip",E,"aria-label",f,3,"click"],["mat-mini-fab","","matTooltip",S,"aria-label",p,1,"toggleDoneRemoveBtn",3,"color"],["mat-icon-button","","matTooltip",u,"color","primary","aria-label",m],["mat-icon-button","","matTooltip",i,"aria-label",t,1,"favorite-exercise-star",3,"click"],["mat-icon-button","","matTooltip",r,"aria-label",n,3,"click"],["mat-mini-fab","","matTooltip",S,"aria-label",p,1,"toggleDoneRemoveBtn",3,"click","mouseenter","mouseleave","color"],["mat-icon-button","","matTooltip",u,"color","primary","aria-label",m,3,"click"]]},template:function(t,r){1&t&&(e.j41(0,"div",0),e.DNE(1,G,16,5,"div",1),e.k0s()),2&t&&(e.Y8G("ngClass",r.cardWrapper),e.R7$(),e.vxM(r.isEmptyPlaceholder?-1:1))},dependencies:[d.YU,R.iY,I.oV,T.An,R.$0],styles:["[_nghost-%COMP%]{border-radius:16px;overflow:hidden}"]})}}return s})();var M=o(6694),b=o(8537),$=o(3037),L=o(2575),O=o(271),g=o(1134);const k=(s,a)=>a.id,j=()=>[l.T1,l.EM,P];function y(s,a){1&s&&(e.j41(0,"div",2)(1,"span"),e.pXf(2,0),e.k0s()())}function w(s,a){1&s&&(e.j41(0,"div",3),e.nrm(1,"mat-spinner",5),e.k0s())}function B(s,a){1&s&&e.nrm(0,"div",9)}function V(s,a){if(1&s){const i=e.RV6();e.j41(0,"sanareapp-exercise-card",7),e.bIt("removeExercise",function(r){e.eBV(i);const n=e.XpG(2);return e.Njj(n.removeCard(r))})("favoriteExercise",function(r){e.eBV(i);const n=e.XpG(2);return e.Njj(n.addToFavorites(r))})("removeFavoriteExercise",function(r){e.eBV(i);const n=e.XpG(2);return e.Njj(n.removeFromFavorites(r))})("cdkDragStarted",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.onDragStarted())})("cdkDragEnded",function(){e.eBV(i);const r=e.XpG(2);return e.Njj(r.onDragEnded())}),e.DNE(1,B,1,0,"div",8),e.k0s()}if(2&s){const i=e.XpG().$implicit;e.Y8G("isEmptyPlaceholder",!1)("exercise",i)("cdkDragData",i)}}function W(s,a){1&s&&e.nrm(0,"div",10)}function z(s,a){if(1&s&&(e.j41(0,"div",6)(1,"sanareapp-exercise-card",11),e.EFF(2," >"),e.k0s()()),2&s){const i=e.XpG().$implicit;e.R7$(),e.Y8G("exercise",i)}}function Q(s,a){if(1&s&&(e.DNE(0,V,2,3)(1,W,1,0),e.nv$(2,0,j,null,1),e.g25(),e.DNE(4,z,3,1,"div",6)),2&s){const i=a.$implicit,t=e.XpG();e.R7$(4),e.vxM(t.transferringItem()===i?4:-1)}}let Y=(()=>{class s{constructor(){this.themeManager=(0,e.WQX)(M.YP),this.shareStateService=(0,e.WQX)(_.kN),this.selectedExercisesService=(0,e.WQX)(_.yr),this.usersService=(0,e.WQX)(C.gs),this.transferringItemService=(0,e.WQX)(_.TI),this.isFetchingData=this.shareStateService.isFetchingData,this.transferringItem=this.transferringItemService.transferringItem,this.userFavorites=this.usersService.userFavorites,this.userId=this.usersService.userId,this.selectedExercises=this.selectedExercisesService.selectedExercises,this.themeSignal=this.themeManager.themeSignal,this.subscriptions=new v.yU,this.isDragging=!1}ngOnInit(){this.windowSize$=(0,b.R)(window,"resize").pipe((0,$.Z)(null),(0,L.B)(200),(0,O.T)(()=>window.innerWidth))}getGridStyle(i){const t=i??0;return this.drawerOpen=this.shareStateService.drawerSignal(),t<1510&&t>1338&&this.drawerOpen?{"grid-template-columns":"repeat(3, 1fr)"}:t<1338&&t>1168&&this.drawerOpen?{"grid-template-columns":"repeat(2, 1fr)"}:{}}entered(){this.transferringItem.set(void 0)}exited(i){this.transferringItem.set(i.item.data),console.log(this.transferringItem())}noReturnPredicate(){return!1}removeCard(i){let t;this.selectedExercises().some((r,n)=>{r.id===i.id&&(t=n)}),this._resetCardState(i,t)}addToFavorites(i){this.userFavorites.update(t=>{const r={...t,favExercises:[...t.favExercises,i.id]};return this._updateFavorites(this.userId(),r),r})}removeFromFavorites(i){const t=this.userFavorites().favExercises.filter(r=>r!==i.id);this.userFavorites.update(r=>({...r,favExercises:[...t]})),this._updateFavorites(this.userId(),this.userFavorites())}_updateFavorites(i,t){const r=this.usersService.updateFavorites(i,t).subscribe(n=>console.log(n));this.subscriptions.add(r)}_resetCardState(i,t){0!==this.exercises.length&&this.exercises.find(r=>{r.id===i.id&&(r.isSelected=!1)})}onDragStarted(){this.isDragging=!0}onDragEnded(){this.isDragging=!1}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["sanareapp-exercises-grid"]],inputs:{exercises:"exercises"},standalone:!0,features:[e.aNF],decls:7,vars:8,consts:()=>{let i;return i="No exercises found for your search",[i,["overlay-scrollbars","",1,"grid-container",3,"options","defer"],[1,"noExercisesFound"],[1,"fetchingDataSpinner"],["cdkDropList","","cdkDropListSortingDisabled","",1,"exercise-cards",3,"cdkDropListEntered","cdkDropListExited","cdkDropListData","ngStyle","cdkDropListEnterPredicate"],["diameter","50"],[1,"static-placeholder"],["cardWrapper","wrap-default","cdkDrag","","cdkDragPreviewContainer","parent",3,"removeExercise","favoriteExercise","removeFavoriteExercise","cdkDragStarted","cdkDragEnded","isEmptyPlaceholder","exercise","cdkDragData"],["class","exercise-card-placeholder",4,"cdkDragPlaceholder"],[1,"exercise-card-placeholder"],[1,"exercise-card-skeleton"],["cardWrapper","wrap-default",3,"exercise"]]},template:function(t,r){1&t&&(e.j41(0,"div",1),e.DNE(1,y,3,0,"div",2)(2,w,2,0,"div",3),e.j41(3,"div",4),e.nI1(4,"async"),e.bIt("cdkDropListEntered",function(){return r.entered()})("cdkDropListExited",function(E){return r.exited(E)}),e.Z7z(5,Q,5,1,null,null,k),e.k0s()()),2&t&&(e.Y8G("options",r.themeSignal()),e.R7$(),e.vxM(0!==r.exercises.length||r.isFetchingData()?-1:1),e.R7$(),e.vxM(r.isFetchingData()?2:-1),e.R7$(),e.Y8G("cdkDropListData",r.exercises)("ngStyle",r.getGridStyle(e.bMT(4,6,r.windowSize$)))("cdkDropListEnterPredicate",r.noReturnPredicate),e.R7$(2),e.Dyx(r.exercises))},dependencies:[d.MD,d.B3,d.Jj,l.O7,A.QX,A.r2,P,g.D6,g.LG],styles:[".noExercisesFound[_ngcontent-%COMP%]{text-align:center;margin:32px 0}.fetchingDataSpinner[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;justify-content:center;left:4px;right:4px;top:4px;width:calc(100% - 20px);height:100%;border-top-left-radius:16px;border-top-right-radius:16px}"]})}}return s})()}}]);
//# sourceMappingURL=716.4f88f2d5df574fa5.js.map