import{R as I,S as z,i as A,j as w,q as R,s as y,t as N,u as $}from"./chunk-CXW6GH2K.js";import"./chunk-I5P6MOLJ.js";import{d as E}from"./chunk-W37ZU7AN.js";import"./chunk-PXE3KWUS.js";import"./chunk-U56OQC2U.js";import"./chunk-CSZSBX7S.js";import"./chunk-ZMMHLWS5.js";import{Ab as s,Bb as l,Cb as g,Gb as M,Kb as O,Ob as x,Pb as p,Ta as v,bb as S,gb as m,hb as u,la as o,nb as D,pb as T,rb as c,ta as P,u as C,ua as f,wb as b}from"./chunk-V5BPZEZN.js";var H=()=>[import("./chunk-K4LDXKKA.js").then(t=>t.ClientsProgressComponent)];function V(t,d){if(t&1&&g(0,"ui-page-toolbar",2),t&2){let e=p();c("pageTitle",e.pageTitle());}}function F(t,d){if(t&1){let e=M();s(0,"clients-progress",6),x("openEditClientProgramEvent",function(n){P(e);let r=p();return f(r.openEditClientProgram(n));}),l();}if(t&2){let e=p();c("programs$",e.clientsPrograms$)("isProgramCompleted",e.isProgramCompleted)("isDashboard",!0);}}function L(t,d){t&1&&(s(0,"div",7),g(1,"div",8)(2,"div",8)(3,"div",8)(4,"div",8)(5,"div",8)(6,"div",8)(7,"div",8)(8,"div",8)(9,"div",8),l());}var ee=(()=>{class t{constructor(){this.clientsService=o(A),this.router=o(E),this.shareClientsDataService=o(w),this.activePageTitle=o(y),this.screenSizeService=o(N),this.isProgramCompleted=[],this.clientInfo=this.shareClientsDataService.clientInfo,this.pageTitle=this.activePageTitle.pageTitle,this.themeManager=o(R),this.themeSignal=this.themeManager.themeSignal,this.screenSize=this.screenSizeService.screenSize;}ngOnInit(){this.pageTitle.set("Kontrolna tabla"),this.clientsPrograms$=this.clientsService.getAllClientsProgramsBasic().pipe(C(e=>{let i=new Date(),n=[];return e.forEach(r=>{let a=r.program,h=new Date(a.dateRange.start),_=new Date(a.dateRange.end),k=_.getTime()-h.getTime(),B=i.getTime()-h.getTime(),G=Math.min(B/k*100,100);a.progress=Math.round(G),_>i&&(this.isProgramCompleted.push(!1),n.push(a),console.log("This program is in progress"));}),n.sort((r,a)=>new Date(a.dateRange.end).getTime()-new Date(r.dateRange.end).getTime()),console.log(n),n;}));}openEditClientProgram(e){console.log(e);let i=e.id,n=e.name,r=e.dateRange;console.log(r),this.clientInfo.set({clientId:e.clientId,clientName:e.clientName,programPosition:e.position,programId:i,programName:n,dateRange:r}),this.router.navigate([`programs/form/${i}`],{queryParams:{programName:`${n}`,isClientProgram:n.isTemplate?"false":"true"}});}static{this.ɵfac=function(i){return new(i||t)();};}static{this.ɵcmp=S({type:t,selectors:[["sanareapp-dashboard"]],decls:9,vars:2,consts:()=>{let e;return e=" Nedavni napredak pacijenata ",[e,[1e3],[3,"pageTitle"],[1,"client-progress-container"],[1,"mat-title-large-margin-plus"],["overlay-scrollbars","",1,"scrollable-container",3,"options","defer"],[3,"openEditClientProgramEvent","programs$","isProgramCompleted","isDashboard"],[1,"programs-list-wrapper-placeholder"],[1,"program-list-skeleton"]];},template:function(i,n){if(i&1&&(m(0,V,1,1,"ui-page-toolbar",2),s(1,"div",3)(2,"h3",4),O(3,0),l(),s(4,"div",5),m(5,F,1,3)(6,L,10,0),D(7,5,H,null,6,null,null,1,u),T(),l()()),i&2){let r;b((r=n.screenSize())!=null&&r.isCompact?-1:0),v(4),c("options",n.themeSignal());}},dependencies:[$,z,I],styles:['[_nghost-%COMP%]{height:100%;width:100%}.client-progress-container[_ngcontent-%COMP%]{display:block;max-width:700px;height:calc(100vh - 170px);overflow:hidden;padding:16px;border-radius:16px}.client-progress-container[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:calc(100vh - 238px);overflow-y:scroll}@media (max-width: 599px){.client-progress-container[_ngcontent-%COMP%]{height:fit-content;width:100%;border-radius:0;padding:8px}.client-progress-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:16px 16px 0}.client-progress-container[_ngcontent-%COMP%]   .scrollable-container[_ngcontent-%COMP%]{height:fit-content;overflow-y:visible}}.programs-list-wrapper-placeholder[_ngcontent-%COMP%]{height:calc(100vh - 238px);overflow-y:hidden}.programs-list-wrapper-placeholder[_ngcontent-%COMP%]   .program-list-skeleton[_ngcontent-%COMP%]{border-radius:8px;width:100%;height:78px;overflow:hidden;position:relative;margin-bottom:4px}.programs-list-wrapper-placeholder[_ngcontent-%COMP%]   .program-list-skeleton[_ngcontent-%COMP%]:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 1s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}']});}}return t;})();export{ee as DashboardComponent};/**i18n:e9421f27e91e2550a5a0bd03ad694673877e5a8020798e378092da15c61db7f3*/