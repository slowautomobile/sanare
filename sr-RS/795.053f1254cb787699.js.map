{"version":3,"file":"795.053f1254cb787699.js","mappings":"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","sources":["./apps/sanare-app/src/app/pages/exercises/selected-exercises-list/selected-exercises-list.component.html","./apps/sanare-app/src/app/pages/exercises/selected-exercises-list/selected-exercises-list.component.ts"],"sourcesContent":["<div class=\"background-wrapper\">\n  <div\n    cdkDropList\n    #selected=\"cdkDropList\"\n    [cdkDropListData]=\"selectedExercises()\"\n    class=\"main-wrap\"\n    (cdkDropListDropped)=\"drop($event)\"\n    (cdkDropListEntered)=\"enteredSelected($event)\"\n    (cdkDropListExited)=\"exitedSelected($event)\"\n  >\n    @for (exercise of selectedExercises(); track exercise.id) {\n      <div class=\"selected-cards-box\" cdkDrag>\n        <div class=\"selected-card\">\n          <div class=\"img-wrapper\">\n            <img\n              class=\"selected-exercise-img\"\n              [src]=\"exercise.images?.mainImg\"\n              [alt]=\"exercise.name[selectedLanguage]\"\n            />\n          </div>\n          <p class=\"selected-exercise-name mat-body-medium\">\n            {{ exercise.name[selectedLanguage] }}\n          </p>\n          <button mat-icon-button (click)=\"removeFromSelected(exercise)\">\n            <mat-icon>close</mat-icon>\n          </button>\n        </div>\n        <div class=\"exercise-card-placeholder\" *cdkDragPlaceholder></div>\n      </div>\n    }\n    @if (selectedExercises().length === 0 && !enteredSelectedList) {\n      <div class=\"add-exercise-placeholder\">\n        <span class=\"mat-body-large\" i18n=\"@@SelectedExercises.addExercise\"\n          >Add exercises</span\n        >\n        <div class=\"mat-headline-medium\">\n          <mat-icon\n            [inline]=\"true\"\n            aria-hidden=\"false\"\n            aria-label=\"List icon\"\n            i18n-aria-label=\"@@SelectedExercises.listIcon\"\n            fontIcon=\"playlist_add\"\n          ></mat-icon>\n        </div>\n      </div>\n    }\n  </div>\n</div>\n","import { Component, inject, Input, input, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { OverlayscrollbarsModule } from 'overlayscrollbars-ngx';\nimport { ThemeManagerService } from '@slowautomobile/ui';\nimport {\n  DropListTransferItemService,\n  Exercise,\n  SelectedExercisesService,\n} from '@slowautomobile/exercises';\nimport {\n  CdkDrag,\n  CdkDragDrop,\n  CdkDragEnter,\n  CdkDragExit,\n  CdkDragPlaceholder,\n  CdkDragPreview,\n  CdkDropList,\n  copyArrayItem,\n  moveItemInArray,\n} from '@angular/cdk/drag-drop';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatIconButton } from '@angular/material/button';\n// eslint-disable-next-line @nx/enforce-module-boundaries\nimport { LocalstorageService } from '@slowautomobile/users';\n\n@Component({\n  selector: 'sanareapp-selected-exercises-list',\n  standalone: true,\n  imports: [\n    CommonModule,\n    CdkDropList,\n    CdkDrag,\n    CdkDragPreview,\n    CdkDragPlaceholder,\n    MatIcon,\n    MatIconButton,\n  ],\n  templateUrl: './selected-exercises-list.component.html',\n  styleUrl: './selected-exercises-list.component.scss',\n})\nexport class SelectedExercisesListComponent implements OnInit {\n  // themeManager = inject(ThemeManagerService);\n  private selectedExercisesService = inject(SelectedExercisesService);\n  transferringItemService = inject(DropListTransferItemService);\n  private localstorageService = inject(LocalstorageService);\n\n  selectedLanguage!: 'en' | 'de' | 'sr';\n\n  transferringItem = this.transferringItemService.transferringItem;\n\n  // transferringItem: Exercise | undefined = undefined;\n  enteredSelectedList = false;\n  // exercises = input<Exercise[]>();\n  @Input() exercises!: Exercise[];\n\n  // themeSignal = this.themeManager.themeSignal;\n  selectedExercises = this.selectedExercisesService.selectedExercises;\n\n  ngOnInit(): void {\n    this.selectedLanguage = this._getUserLanguageToken();\n  }\n\n  drop(event: CdkDragDrop<Exercise[]>) {\n    if (\n      event.previousContainer.id !== event.container.id &&\n      !event.container.data.some(\n        item =>\n          item.id === event.previousContainer.data[event.previousIndex].id,\n      )\n    ) {\n      this.selectedExercisesService.addToSelected(\n        event.previousContainer.data[event.previousIndex],\n      );\n      copyArrayItem(\n        event.previousContainer.data,\n        event.container.data,\n        event.previousIndex,\n        event.currentIndex,\n      );\n      event.previousContainer.data[event.previousIndex].isSelected = true;\n\n      console.log(event.previousContainer.data[event.previousIndex]);\n      console.log(this.selectedExercises());\n      console.log(this.transferringItem());\n    } else {\n      moveItemInArray(\n        event.container.data,\n        event.previousIndex,\n        event.currentIndex,\n      );\n    }\n    // this.transferringItem = undefined;\n    this.transferringItem.set(undefined);\n\n    this.enteredSelectedList = false;\n\n    // this.enteredSelectedList = true;\n  }\n\n  enteredSelected(event: CdkDragEnter<Exercise[]>) {\n    // this.transferringItem = undefined;\n    this.enteredSelectedList = true;\n  }\n\n  exitedSelected(e: CdkDragExit<any>) {\n    // this.transferringItem = undefined;\n    this.transferringItem.set(undefined);\n\n    this.enteredSelectedList = false;\n    // console.log('asdf');\n  }\n\n  removeFromSelected(exercise: Exercise) {\n    console.log(this.selectedExercisesService.selectedExercises());\n    this.removeCard(exercise);\n\n    this.selectedExercisesService.removeFromSelected(exercise);\n\n    console.log(this.selectedExercisesService.selectedExercises());\n  }\n\n  // SEEMS THAT IT WORKS, REFACTOR THESE TWO FUNCTIONS IN ONE AND REMOVE UNNECESSARY CODE\n  removeCard(cardToRemove: Exercise): void {\n    let indexToRemove!: number;\n\n    this.selectedExercises().some((selectedExercise, i) => {\n      if (selectedExercise.id === cardToRemove.id) {\n        indexToRemove = i;\n      }\n    });\n    // console.log(cardToRemove, indexToRemove);\n    this._resetCardState(cardToRemove, indexToRemove);\n    // this.selectedExercises.splice(indexToRemove, 1);\n\n    // if (indexToRemove !== -1) {\n    // }\n  }\n\n  private _resetCardState(cardToReset: Exercise, indexToRemove: number) {\n    if (this.exercises.length === 0) {\n      return;\n    }\n\n    this.exercises.find(exerciseToReset => {\n      if (exerciseToReset.id === cardToReset.id) {\n        exerciseToReset.isSelected = false;\n      }\n    });\n  }\n\n  private _getUserLanguageToken(): 'en' | 'de' | 'sr' {\n    return <'en' | 'de' | 'sr'>(\n      this.localstorageService.getToken('userLanguage')?.split('-')[0]\n    );\n  }\n}\n"],"names":["i0","exercise_r3","_r2","$implicit","ctx_r3","removeFromSelected","SelectedExercisesListComponent_For_4_div_9_Template","images","mainImg","name","selectedLanguage","SelectedExercisesListComponent","constructor","this","selectedExercisesService","inject","SelectedExercisesService","transferringItemService","DropListTransferItemService","localstorageService","LocalstorageService","transferringItem","enteredSelectedList","selectedExercises","ngOnInit","_getUserLanguageToken","drop","event","previousContainer","id","container","data","some","item","previousIndex","moveItemInArray","currentIndex","addToSelected","copyArrayItem","isSelected","console","log","set","undefined","enteredSelected","exitedSelected","e","exercise","removeCard","cardToRemove","indexToRemove","selectedExercise","i","_resetCardState","cardToReset","exercises","length","find","exerciseToReset","getToken","split","selectors","inputs","standalone","features","decls","vars","consts","i18n_0","$localize","$event","_r1","ctx","SelectedExercisesListComponent_For_4_Template","_forTrack0","SelectedExercisesListComponent_Conditional_5_Template","CommonModule","CdkDropList","CdkDrag","CdkDragPlaceholder","MatIcon","MatIconButton"],"sourceRoot":"webpack:///"}